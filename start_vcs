

echo "Starting vcs!" 

# launch main process 
node src/nodejs/main.js --autostart-python & 
main_pid=$!


# launch the react web server 
cd src/client/react_ui ; 
yarn serve build/ & 
cd ../../../ 
serve_pid=$!

# start hyperloop 
node src/nodejs/typescript/dist/bin/hyperloop_provide.js & 
hl_pid=$!

# read user input to pause 
echo ; echo; echo;
echo "PRESS ENTER TO EXIT::" 
echo ; echo; echo;

# launch web browser (PLATFORM dependent) 
if [[ "$OSTYPE" == "linux-gnu" ]]; then
    # ...
    /usr/bin/google-chrome --url "http://127.0.0.1:5000" &     
    
elif [[ "$OSTYPE" == "darwin"* ]]; then
    # Mac OSX
    /Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome "http://127.0.0.1:5000" &     
elif [[ "$OSTYPE" == "cygwin" ]]; then
        # POSIX compatibility layer and Linux environment emulation for Windows
elif [[ "$OSTYPE" == "msys" ]]; then
        # Lightweight shell and GNU utilities compiled for Windows (part of MinGW)
elif [[ "$OSTYPE" == "win32" ]]; then
        # I'm not sure this can happen.
elif [[ "$OSTYPE" == "freebsd"* ]]; then
        # ...
else
        # Unknown.
fi

read dummy_var 

echo "Cleaning up.." 
echo "Killing main_pid=$main_pid" 
kill $main_pid
echo "Killing serve_pid=$serve_pid" 
kill $serve_pid
echo "Killing hl_pid=$hl_pid"  
kill $hl_pid

echo "Finished :)" 



