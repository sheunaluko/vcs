parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r},p.cache={};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"Q/L+":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.connect=t;var e=function(e){return function(t){var n=new AudioContext,o=n.createMediaStreamSource(t),r=n.createScriptProcessor(1024,1,1);o.connect(r),r.connect(n.destination),r.onaudioprocess=function(t){e(t.inputBuffer.getChannelData(0))}}};function t(t){navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(e(t))}
},{}],"FO+Z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.first_upper_case=A,exports.identity=M,exports.set_difference=xr,exports.get_logger=gr,exports.set_debug=n,exports.bug=e,exports.debug=o,exports.and=l,exports.array_and=u,exports.apply=f,exports.avg=a,exports.multiply=c,exports.rms=s,exports.variance=p,exports.std=x,exports.take=g,exports.arr_mult=d,exports.perf=h,exports.arr_range=_,exports.range=v,exports.first=m,exports.second=y,exports.last=b,exports.zip_map=C,exports.zip=T,exports.dict_2_vec=k,exports.number_or_self=I,exports.d_map=E,exports.dict_vals_2_num=N,exports.diff=B,exports.max=D,exports.min=P,exports.merge=j,exports.cycle_array=q,exports.loop_fn=z,exports.get_series=H,exports.std_percent_diff=L,exports.array_percent_diff=O,exports.array_log_diff=S,exports.cv=R,exports.cv_matrix=U,exports.log_diff_half_buff=F,exports.spd_matrix=G,exports.matrix_map=J,exports.matrix_mapper=K,exports.dom=Q,exports.set_inner_html=V,exports.flex_row=W,exports.make_div_array=X,exports.id_from_loc=Y,exports.test_div_array=Z,exports.app_clear=$,exports.app_render=rr,exports.get_colors=nr,exports.now=er,exports.click_id=or,exports.delay=ir,exports.loop_until_true=ur,exports.assign_to_window=sr;var r=!0,t=console.log;function n(t){r=t}function e(t,...n){if(r){console.log("<- "+t+" ->");for(var e=0;e<n.length;e++)console.log(n[e]);console.log("<- "+t+" ->")}}function o(t){r&&console.log(t)}function l(...r){for(var t=!0,n=0;n<r.length;n++)t=t&&r[n];return!!t}function u(r){for(var t=!0,n=0;n<r.length;n++)t=t&&r[n];return!!t}function f(r,t){return r.apply(null,t)}function a(r){for(var t=0,n=0;n<r.length;n++)t+=r[n];return t/r.length}function c(r){for(var t=1,n=0;n<r.length;n++)t*=r[n];return t}function s(r){for(var t=0,n=0;n<r.length;n++)t+=r[n]*r[n];return Math.sqrt(t/r.length)}function p(r){for(var t=a(r),n=0,e=0;e<r.length;e++)n+=Math.pow(r[e]-t,2);return n/r.length}function x(r){return Math.sqrt(p(r))}function g(r,t){for(var n=Array(t).fill(0),e=0;e<t;e++)n[e]=r[e];return n}function d(r,t){return r.map(r=>r/t)}function h(r){var t=Array(2e4).fill(0);for(i=0;i<2e4;i++){var n=performance.now(),e=(r(),performance.now());t[i]=e-n}return a(t)}function _(r){return f(Math.max,r)-f(Math.min,r)}function v(r,t){for(var n=t-r,e=Array(n).fill(0),o=0;o<n;o++)e[o]=r+o;return e}function m(r){return r[0]}function y(r){return r[1]}function w(r){r.slice(1)}function A(r){return r.charAt(0).toUpperCase()+r.slice(1)}function M(r){return r}function b(r){return r[r.length-1]}function C(r,t){for(var n={},e=0;e<r.length;e++)n[r[e]]=t[e];return n}function T(r,t){return r.map(function(r,n){return[r,t[n]]})}function k(r){var t=[];for(var n in r)t.push([n,r[n]]);return t}function I(r){var t=Number(r);return isNaN(t)?r:t}function E(r,t){for(var n in r)r[n]=t(r[n]);return r}function N(r){return E(r,I)}function B(r){for(var t=Array(r.length-1).fill(0),n=1;n<r.length;n++)t[n-1]=r[n]-r[n-1];return t}function D(r){for(var t=r[0],n=1;n<r.length;n++)r[n]>t&&(t=r[n]);return t}function P(r){for(var t=r[0],n=1;n<r.length;n++)r[n]<t&&(t=r[n]);return t}function j(r,t){return Object.assign({},r,t)}function q(r,t){return r.push(t),r.shift(),r}function z(r,t,n){for(var e=r.length,o=Array(e).fill(0),i=n;i<e;i++)o[i]=t(r.slice(i-n,i));return o}function H(r,t){return r.map(r=>r[t])}function L(r){for(var t=Array(r.length-1).fill(NaN),n=0;n<t.length;n++)t[n]=(r[n+1]-r[n])/r[n];return x(t)}function O(r,t){for(var n=Array(t.length).fill(0),e=0;e<n.length;e++)n[e]=(t[e]-r[e])/r[e];return n}function S(r,t){for(var n=Array(t.length).fill(0),e=0;e<n.length;e++)n[e]=Math.log(t[e])-Math.log(r[e]);return n}function R(r){return x(r)/a(r)}function U(r){let t=r[0].length;for(var n=Array(t).fill(null),e=0;e<t;e++){let t=r.map(r=>r[e]);n[e]=R(t)}return n}function F(r){let t=Math.ceil(r.length/2),n=g(r,t),e=r.slice(-(r.length-t));return Math.log(a(e))-Math.log(a(n))}function G(r){let t=r[0].length;for(var n=Array(t).fill(null),e=0;e<t;e++){let t=r.map(r=>r[e]);n[e]=L(t)}return n}function J(r,t){let n=r[0].length;for(var e=Array(n).fill(null),o=0;o<n;o++){let n=r.map(r=>r[o]);e[o]=t(n)}return e}function K(r){return function(t){return J(t,r)}}function Q(r){return document.createElement(r)}function V(r,t){t instanceof HTMLElement?r.appendChild(t):r.innerHTML=t}function W(r,t,n){var e,o;for((e=Q("div")).style="display : flex ; flex-wrap : nowrap ; flex-direction : row ; flex-grow : 1 ",o=0;o<r;o++){var i=Q("div");i.style="flex-grow : 1";var l=n(o,i);l&&V(i,l),e.appendChild(i)}return e}function X(r,t,n,e){var o,i;for((o=Q("div")).id=n,o.style="width: 100% ; height : 100% ; display : flex ; flex-wrap : nowrap ; flex-direction : column ",i=0;i<r;i++){var l=W(t,n+"_"+i+",",function(r,t){return e(i,r,t)});o.appendChild(l)}return o}function Y(r,t,n){return n*r+t}function Z(r,t){return X(r,t,"foo",function(r,n,e){return Y(r,n,t).toString()})}function $(){for(var r=document.getElementById("app");r.firstChild;)r.removeChild(r.firstChild)}function rr(r){$(),document.getElementById("app").appendChild(r)}var tr=["black","blue","red","green","yellow","orange"];function nr(r){return g(tr,r)}function er(){return(new Date).getTime()}function or(r){let t=document.getElementById(r);console.assert(t),t.click()}function ir(r){return new Promise((t,n)=>{setTimeout(function(){t(!0)},r)})}function lr(){return(new Date).getTime()}function ur(r,t,n){var e=lr();return new Promise((o,i)=>{let l=setInterval(function(){let t=lr();if(r())setTimeout(function(){clearInterval(l)},1),o(!1);else{t-e>=n&&(setTimeout(function(){clearInterval(l)},1),o(!0))}},t)})}function fr(r,t){let n=Array(r.length).fill(null);for(let e=0;e<r.length;e++)n[e]=t(e,r[e]);return n}function ar(...r){m(r)}function cr(r,t){keys(r).map(t=>r[t])}function sr(r,n){window[r]?(window[r]=n,t("(Re)Defining: "+r)):window[r]=n}function pr(){window.location=window.location}function xr(r,t){let n=new Set;for(let e of r)t.has(e)||n.add(e);return n}function gr(r){let t="["+r+"]:: ",n=function(r,n){"string"==typeof n?console[r](t+n):(console[r](t+"~>"),console[r](n))};return{i:function(r){n("info",r)},d:function(r){n("debug",r)}}}
},{}],"wjcX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.is_speaking=o,exports.finished_speaking=p,exports.speak=a,exports.speech_que=exports.tts=void 0;var e=r(require("./utils.js")),t=r(require("./speech.js"));function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var s=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};s.get||s.set?Object.defineProperty(t,r,s):t[r]=e[r]}return t.default=e,t}let s=e.get_logger("tts");var i=window.speechSynthesis;exports.tts=i;var n=[];function o(){return i.speaking}async function p(){return await e.loop_until_true(()=>!i.speaking,200,6e4)}async function a(e){if(i.speaking)s.d("Scheduling speech for later."),n.push(e);else{t.stop_recognition();var r=new SpeechSynthesisUtterance(e);r.voice=i.getVoices()[49],r.rate=1.2,i.speak(r);await p();let s=n.shift();s?a(s):t.start_recognition()}}exports.speech_que=n;
},{"./utils.js":"FO+Z","./speech.js":"H8qx"}],"9o10":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.start=o;var e=i(require("./mic.js")),r=i(require("./utils.js")),t=i(require("./tts.js"));function i(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};i.get||i.set?Object.defineProperty(r,t,i):r[t]=e[t]}return r.default=e,r}let n=5;function o(i){var o=.001;e.connect(function(e){let s=r.rms(e);0!=o&&s/o>n&&!t.is_speaking()&&i(),o=s})}
},{"./mic.js":"Q/L+","./utils.js":"FO+Z","./tts.js":"wjcX"}],"H8qx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.connect_ws=c,exports.start_recognition=d,exports.stop_recognition=p,exports.start_audio_trigger=l,exports.recognition=void 0;var t=o(require("./audio_detector.js")),e=require("./utils.js"),n=o(require("./tts.js"));function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};o.get||o.set?Object.defineProperty(e,n,o):e[n]=t[n]}return e.default=t,e}let r=(0,e.get_logger)("speech"),i=9001;var s=null;function c(){r.i("Connecting ws on port: "+i);var t=new WebSocket("ws://localhost:"+i);t.addEventListener("open",()=>r.i("WS connection opened")),t.addEventListener("message",t=>{let e=JSON.parse(t.data);r.d("Got ws msg:"),r.d(e),"speak"==e.type&&n.speak(e.text)}),s=function(e){t.send(JSON.stringify({type:"vcs_text",text:e}))}}var u=new webkitSpeechRecognition;exports.recognition=u,u.continuous=!0,u.interimResults=!1,u.onstart=function(){r.i("Recognition starting")},u.onsoundstart=function(){},u.onresult=function(t){r.d("Got recognition result"),r.d(t);let e=t.results[t.resultIndex][0].transcript;s(e)},u.onerror=function(t){r.d("Recognition error:"),r.d(t)},u.onend=function(){r.i("Recognition ended"),a=!1};var a=!1;function d(){a||(r.d("Starting recognition."),u.start(),a=!0)}function p(){u.abort(),a=!1}async function g(t){}function l(){t.start(d)}
},{"./audio_detector.js":"9o10","./utils.js":"FO+Z","./tts.js":"wjcX"}],"Focm":[function(require,module,exports) {
"use strict";var e=r(require("./speech.js")),t=r(require("./tts.js"));function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};i.get||i.set?Object.defineProperty(t,r,i):t[r]=e[r]}return t.default=e,t}e.connect_ws(),e.start_recognition(),e.start_audio_trigger(),window.vcs={speech:e,tts:t};
},{"./speech.js":"H8qx","./tts.js":"wjcX"}]},{},["Focm"], null)
//# sourceMappingURL=/vcs_client.map