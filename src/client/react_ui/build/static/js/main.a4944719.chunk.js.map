{"version":3,"sources":["ts/dist/vcs_text_client/index.js","js/socksync_web_client.js","../../../src/utils/logger.ts","components/SocksyncInspector.js","../../../src/hyperloop/web_client.ts","js/vcs_client/utils.js","components/commands sync /.jsx$","components/commands/default.jsx","components/commands/dispatch_builder.jsx","components/commands/javascript_echo.jsx","js/command_manifest.js","../../../src/utils/index.ts","components/Home.js","components/CmdsContainer.js","components/ChatBox.js","components/TerminalWidget2.js","components/GlobeGl.js","components/WidgetDictionary.js","components/Inspector.js","components/Globe.js","components/IframeWidget.js","components/MapGl.js","components/WidgetSelectorManifest.js","components/WidgetSelector.js","components/MosaicWindowWrapper.js","components/mosaic_integration.js","components/Toaster.js","js/vcs_hub.js","components/AudioProgress.js","components/NavBar.js","App.js","serviceWorker.js","js/reducers/index.js","js/store/index.js","js/socksyncer.js","js/vcs_ui.js","js/vcs_client/mic.js","js/vcs_client/tts.js","js/vcs_client/speech2.js","js/vcs_client/audio_detector.js","js/vcs_client/index.js","js/index.js","index.js"],"names":["__spreadArrays","this","s","i","il","arguments","length","r","Array","k","a","j","jl","Object","defineProperty","exports","value","VCS_TEXT_CLIENT","ops","conn","undefined","prototype","log","args","_i","console","apply","id","connect","url","host","port","WebSocket","onopen","on_open","bind","onmessage","_msg","msg","JSON","parse","data","on_msg","onclose","reconnect","e","setTimeout","send","stringify","close","logger","info","debug","get_logger","name","l","t","m","header","d","Client","subscribe_id","on_update","socksync_port","socksync_host","connection_url","ws","state","register","message","type","do_state_transition","keys","map","constructor","window","babel","Babel","React","transpile","text","presets","code","util","make_client","socksync","editor","document","getElementById","aceDefault","MyInspector","ConfigurationUI","isOpen","ui_state","client","renderElement","editorText","mode","theme","editorProps","$blockScrolling","width","height","onChange","v","setState","El","eval","style","margin","onClick","keepChildrenMounted","marginBottom","makeSS","label","labelFor","placeholder","renderClick","getEditor","marginTop","backgroundColor","Component","InspectionUI","SSInspector","useState","configuring","update_configuring","update","global_debug","set_debug","b","bug","tag","and","ret","array_and","arr","f","avg","sum","multiply","rms","Math","sqrt","variance","_avg","pow","std","take","coll","num","fill","arr_mult","x","y","perf","results","t0","performance","now","t1","arr_range","max","min","range","len","first","second","first_upper_case","charAt","toUpperCase","slice","identity","last","zip_map","ks","vs","result","zip","xs","ys","dict_2_vec","push","number_or_self","val","Number","isNaN","d_map","dict_vals_2_num","diff","curr_max","curr_min","merge","assign","cycle_array","shift","loop_fn","fn","get_series","field","std_percent_diff","tmp","NaN","array_percent_diff","a1","a2","array_log_diff","cv","cv_matrix","matrix","num_els","el_array","log_diff_half_buff","buff","split","ceil","fh","sh","spd_matrix","matrix_map","matrix_mapper","dom","createElement","set_inner_html","thang","HTMLElement","appendChild","innerHTML","flex_row","id_base","container","html","make_div_array","n","row","new_id_base","col","el","id_from_loc","c","test_div_array","toString","app_clear","app","firstChild","removeChild","app_render","colors","get_colors","Date","getTime","click_id","assert","click","delay","ms","Promise","resolve","reject","get_ms","loop_until_true","rate","timeout","t_start","setInterval","t_now","clearInterval","assign_to_window","var_name","set_difference","s1","s2","Set","has","add","webpackContext","req","webpackContextResolve","__webpack_require__","o","Error","module","UI","props","useSelector","items","time","require","modules","replace","default","Home","vcs_ui","CmdWrapper","subscriptions","Renderer","CmdsContainer","cmd_uis","active_ids","cmd","join","command_manifest","key","className","traceroute","vcs","hyperloop","hyperloop_connect","hyperloop_call","geo_data_to_arcs","geo_data","arcs","curr","next","startLat","latitude","startLng","longitude","endLat","endLng","color","round","random","widget_dictionary","element","title","ports","inspection_ports","inspection_candidates","response_dict","payload","params","quiet","on_terminal_msg","tc","vcs_tc","handler","startState","descriptions","show","barColor","fontWeight","fontSize","commandPassThrough","print","send_msg","display","position","zoom","viewport","setViewport","vcs_setViewport","vcs_viewPort","vcs_set_viewport","vp","new_vp","onViewportChange","mapboxApiAccessToken","setData","do_search","thinking","displaying","trace_data","ips","ip","promises","all","ip_locs","zIndex","flexGrow","top","left","icon","globeImageUrl","arcsData","arcColor","arcStroke","arcDashLength","arcDashGap","arcDashAnimateTime","curr_id","gen_id","WIDGETS","widgets_info","folder_keys","to_return","obj","hasCaret","isExpanded","content","tooltip","Position","RIGHT","childNodes","children","widget_id","build_widgets","WidgetSelector","intent","Intent","PRIMARY","Classes","TREE_NODE_ICON","nodes","handleNodeClick","nodeData","_nodePath","originallySelected","isSelected","shiftKey","forEachNode","windowId","widget","widget_title","store","dispatch","handleNodeCollapse","handleNodeExpand","contents","onNodeClick","onNodeCollapse","onNodeExpand","ELEVATION_2","callback","node","get_new_node_id","MosaicWindowWrapper","ELEMENT_MAP","TITLE_MAP","path","createNode","specs","Windows","renderTile","initialValue","AppToaster","Toaster","create","TOP","subscribe","cb","publish","fns","forEach","functions","provide","func","call","AudioProgress","level","setLevel","icons","NavBar","audio_on","DARK","align","Alignment","LEFT","MINIMAL","ui_msg","toggle_audio","CENTER","mosaic","App","showToast","PureComponent","Boolean","location","hostname","match","initialState","subscription_data","hello","rootReducer","produce","action","filter","createStore","__REDUX_DEVTOOLS_EXTENSION__","vcs_ui_connection","event","Dispatch","start_sync","audio_primitives","context","source","processor","stream","navigator","mediaDevices","getUserMedia","audio","video","then","AudioContext","createMediaStreamSource","createScriptProcessor","destination","onaudioprocess","inputBuffer","getChannelData","handleSuccess","disconnect","ctx","tts","speechSynthesis","speech_que","is_speaking","speaking","finished_speaking","speak","speech","utterance","SpeechSynthesisUtterance","voice","getVoices","sounds","core","connect_ws","close_ws","send_text","vcs_params","success","continue","unrecognized","error","recognition","webkitSpeechRecognition","continuous","interimResults","onstart","onsoundstart","onresult","resultIndex","transcript","onerror","onend","is_started","start_recognition","start","stop_recognition","abort","trigger_text","start_audio_trigger","last_rms","mic","buf","ad","stop_audio_trigger","last_result","init_speech","globals","hub","dotenv","ReactDOM","render","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.a4944719.chunk.js","sourcesContent":["\"use strict\";\n/*\n Sat Feb 29 10:47:36 PST 2020\n Typescript module for VCS_TEXT_CLIENT\n Will provide a small re-usable library for\n Communicating with VCS Text server\n */\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar VCS_TEXT_CLIENT = /** @class */ (function () {\n    function VCS_TEXT_CLIENT(ops) {\n        this.conn = undefined; // ref to the connection \n        this.ops = ops;\n    }\n    VCS_TEXT_CLIENT.prototype.log = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        console.log.apply(null, __spreadArrays([\"[vtc(\" + (this.ops.id || \"\") + \")]::\"], args));\n    };\n    VCS_TEXT_CLIENT.prototype.connect = function () {\n        try {\n            var url = \"ws://\" + this.ops.host + \":\" + this.ops.port;\n            this.log(\"Attempting connection to url: \" + url);\n            this.conn = new WebSocket(url);\n            /*\n            Set the msg handlers\n            */\n            //open \n            this.conn.onopen = (function open() {\n                this.log(\"Connection opened\");\n                if (this.ops.on_open) {\n                    this.ops.on_open();\n                }\n            }).bind(this);\n            //msg\n            this.conn.onmessage = (function message(_msg) {\n                this.log(\"Got message\");\n                var msg = JSON.parse(_msg.data);\n                //for now we just forward the message to the handler \n                this.ops.on_msg(msg);\n            }).bind(this);\n            //close \n            this.conn.onclose = (function close() {\n                this.log(\"WS Connection was closed for some reason\");\n                if (this.ops.reconnect) {\n                    this.log(\"Attempting reconnect\");\n                    this.connect();\n                }\n            }).bind(this);\n        }\n        catch (e) {\n            this.log(\"Oops.. an error occured\");\n            this.log(\"Here it is:\");\n            this.log(e);\n            //throw(\"Could not connect\") \n            if (this.ops.reconnect) {\n                setTimeout((function () {\n                    this.connect();\n                }).bind(this), this.ops.reconnect);\n                //will reconnect after this.ops.reconnect MS \n            }\n        }\n    };\n    VCS_TEXT_CLIENT.prototype.send = function (msg) {\n        /*\n        For now allow sending of any object\n        */\n        if (this.conn) {\n            this.conn.send(JSON.stringify(msg));\n        }\n        else {\n            this.log(\"Not yet connected! Please connect first by running {obj}.connect()\");\n        }\n    };\n    VCS_TEXT_CLIENT.prototype.close = function () {\n        if (this.conn) {\n            this.conn.close();\n        }\n    };\n    return VCS_TEXT_CLIENT;\n}());\nexports.VCS_TEXT_CLIENT = VCS_TEXT_CLIENT;\n","/* \n   Tue Jan 28 10:33:56 PST 2020\n   my (Sheun Aluko)  implementation of diff sync browser client \n */ \n\n\n/* Some params */\nvar default_socksync_port = 9004 \n\n\n/* \n   define the state transition function, used by both the server and client \n   for updating the state with the new data  \n*/\n\nexport function do_state_transition({state={}, data}) { \n    /* \n       used to just be Object.assign(state,data) , but that only does SHALLOW COPIES \n       we can do better than that though, by utilizing recursion\n\n       basic idea: \n       1) loop through vals of data update\n       2) if the val IS a dict, then we must recurse \n       3) if not we just return it \n    */\n    Object.keys(data).map( k=> { \n\t//check if its a dictionary \n\tif (data[k].constructor == Object ) { \n\t    //it is, so we recurse \n\t    //note that new arguments are subset of prior arguments \n\t    state[k] = do_state_transition({state: state[k], data : data[k]})\n\t} else { \n\t    //not, so we set the property \n\t    state[k] = data[k]\n\t}\n    })\n    \n    return state \n    \n    /* \n       An interesting sidenote: the default argument state={} is necessary, \n       because some of the recursive calls will pass a null state value \n       when the data update is creating new recursive fields\n     */\n}\n\n\n//define logger (to replace the nodejs logger) \nvar logger = { info : console.log, debug  : console.log } \nfunction get_logger(name) { \n    let l = function(t,m) { \n\tlet spacer = t =='info' ? \" \" : \"\" \n\tlet header = \"[\" + name + \"] \\t\\t ~ \" \t\n\t\n\tif (typeof(m) == 'string' ) { \n\t    logger[t](header + m)   //adds header if string\n\t}\n\telse { \n\t    logger[t](header)       //if not prints header first \n\t    logger[t](JSON.stringify(m))\n\t}\n    }\n    let i = function(m) { l(\"info\",m) } \n    let d = function(m) { l(\"debug\", m) } \n    return { i, d } \n} \n\n\n\n\n/* First I will define the client  */\nexport class Client { \n    \n    /* \n       Required params are: \n         - subscribe_id  (id of the subscription to connect on) \n\t - on_update (callback for when data has been updated) \n     */\n    constructor(ops={}) { \n\t\n\tif (!ops.subscribe_id) { throw(\"Please provide subscribe_id\") } \n\tif (!ops.on_update) { throw(\"Please provide on_update callback\") } \t\n\n\tthis.log = get_logger(\"csync_\"+ops.subscribe_id)\n\tthis.subscribe_id =  ops.subscribe_id \n\tthis.socksync_port = ops.port || default_socksync_port\n\tthis.socksync_host = ops.host || \"localhost\"\n\tthis.connection_url = `ws://${this.socksync_host}:${this.socksync_port}`\n\tthis.ws = null \n\t\n\t\n\t//the client will have to keep track of its state \n\tthis.state = {} \n\tthis.on_update = ops.on_update  //and will trigger on_update after changes have been made \n\t\n\tthis.connect() \n\t\n    }\n    \n    \n    connect() { \n\t\n\t//will connect to the socksync server using the member var port \n\tlet url = this.connection_url \n\tthis.log.d(\"Attempting connection to url: \" + url)\n\tvar ws = new WebSocket(url) \n\t\n\t//assign the ws instance \n\tthis.ws = ws \n\t\n\t//now we set the callbacks \n\tws.onopen = (function open() { \n\t    this.log.d(\"Connection successful\") \n\t    //send a registration message now via the (my) protocol \n\t    this.register() \n\t}).bind(this) \n\n\tws.onmessage = (function message(_msg) { \n\t    \n\t    this.log.d(\"Got message: \" )\n\t    this.log.d(_msg.data) \n\t    \n\t    let msg = JSON.parse(_msg.data)\n\t    switch(msg.type) { \n\t\t\n\t    case \"update\" : \n\t\tlet data = msg.data\n\t\tthis.log.d(\"Received data update: \\n\" + JSON.stringify(data)) \n\t\t//will need to apply the data update \n\t\tthis.log.d(\"Apply update to the state, which is currently: \") \n\t\tthis.log.d(this.state) \n\t\tthis.state = do_state_transition({state : this.state, data}) \n\t\tthis.log.d(\"Now this.state is: \") ; this.log.d(this.state) \n\t\tthis.log.d(\"Calling on update callback now with this.state\") \n\t\tthis.on_update(this.state) \n\t\tthis.log.d(\"Done\") \n\t\tbreak \n\t\t\n\t    default : \n\t\tthis.log.d(\"Unrecognized message type:\") \n\t\tthis.log.d(message) \n\t    }\t    \n\t    \n\t}).bind(this) \n\n\tws.onclose = (function close() { \n\t    this.log.d(\"The ws connection was closed\") \n\t}).bind(this) \n\t\n\t\n    }\n    \n    send(msg) { \n\tif (!this.ws) {throw(\"ws is undefined\")} \n\tthis.ws.send(JSON.stringify(msg)) \n    }\n    \n    register() { \n\tlet msg = { \n\t    type : 'register', \n\t    subscribe_id : this.subscribe_id \n\t}\n\tthis.send(msg) \n\tthis.log.d(\"Sent register message:\\n\" + JSON.stringify(msg)) \n    }\n    \n    update(data) { \n\tlet msg = { \n\t    type : 'update', \n\t    data \n\t}\n\tthis.send(msg) \n\tthis.log.d(\"Send update message:\\n\" + JSON.stringify(data)) \n    }\n    \n    \n    \n    \n    \n}\n\n\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass Logger {\n    constructor(id) {\n        this.enabled = true;\n        this.id = id;\n        this.header = `[${id}]::`;\n    }\n    l(...args) {\n        //console.log(args)\n        if (!this.enabled) {\n            return;\n        }\n        var next_print;\n        var to_flush = this.header;\n        while (next_print = args.shift()) {\n            next_print = next_print[0];\n            //console.log(next_print) \n            if (next_print.constructor == String) {\n                to_flush += (\" \" + next_print);\n            }\n            else {\n                console.log(to_flush);\n                console.log(JSON.stringify(next_print));\n                to_flush = this.header;\n            }\n        }\n        if (to_flush != this.header) {\n            console.log(to_flush);\n        }\n    }\n    i(...args) {\n        this.l(args);\n    }\n    d(...args) {\n        this.l(args);\n    }\n    disable() {\n        this.enabled = false;\n    }\n    enable() {\n        this.enabled = true;\n    }\n}\nexports.Logger = Logger;\nfunction make_logger(id) {\n    return new Logger(id);\n}\nexports.make_logger = make_logger;\n//# sourceMappingURL=logger.js.map","import React, { useState } from \"react\";\n//import ReactDOM from \"react-dom\";\n\nimport * as util from \"../js/vcs_client/utils.js\";\nimport * as socksync from \"../js/socksync_web_client.js\";\nimport { ObjectInspector } from \"react-inspector\";\nimport { Button, Collapse, Divider, FormGroup, InputGroup } from \"@blueprintjs/core\";\n//import JsxParser from \"react-jsx-parser\";\nimport * as Babel from \"@babel/standalone\";\n\nimport AceEditor from \"react-ace\";\n\nimport \"ace-builds/src-noconflict/mode-jsx\";\nimport \"ace-builds/src-noconflict/theme-github\";\n\nwindow.babel = Babel;\nwindow.React = React;\nwindow.transpile = function(text) {\n  let code = Babel.transform(text, { presets: [\"react\"] }).code;\n  return code;\n};\n\nvar log = util.get_logger(\"ss_insp\");\n\nfunction make_client(ops) {\n  //let { port, host, subscribe_id, on_update } = ops;\n  var client = new socksync.Client(ops);\n  return client;\n}\n\n/* \n TO DO -- have blueprint form \n then evalaute it and connect to the thing ... \n then render an inspector element \n*/\n\nlet editor = () => document.getElementById(\"textEditor\");\nwindow.editor = editor;\n\nconst aceDefault = `(state) => { \n    return ( \n        <h1> Hiya </h1> \n    )\n}`;\n\nfunction MyInspector(state) {\n  return <ObjectInspector data={state} />;\n}\n\nclass ConfigurationUI extends React.Component {\n  state = {isOpen : true , ui_state : {} } \n\n  client = null;\n  renderElement = MyInspector;\n\n  editorText = aceDefault;\n  \n  componentDidMount() { \n      //window.obj = this \n  }\n\n  componentWillUnmount() { \n      //close the client \n      if (this.client && this.client.ws && this.client.ws.close)\n      this.client.ws.close() \n  }\n\n  getEditor() {\n    return (\n      <AceEditor\n        mode=\"jsx\"\n        theme=\"github\"\n        name=\"textEditor\"\n        editorProps={{ $blockScrolling: true }}\n        width=\"inherit !important\"\n        height=\"150px\"\n        value={this.editorText}\n        onChange={function(v) {\n          let e = editor();\n          e.code = v;\n          this.editorText = v;\n        }.bind(this)}\n      />\n    );\n  }\n\n  makeSS() {\n    //first get all the data\n    let host = document.getElementById(\"url\").value || \"localhost\";\n    let port = document.getElementById(\"port\").value || 9005;\n    let subscribe_id = document.getElementById(\"sid\").value || \"main\";\n\n    console.log(\n      `Got options: host=${host},port=${port},subscribe_id=${subscribe_id}`\n    );\n\n    //now we make the sock sync client ...\n    let on_update = function(data) {\n      //update the state with it\n      this.setState({ui_state: data});\n      console.log(\"State updated with:\");\n      console.log(data);\n    }.bind(this);\n\n    let ops = { port, host, subscribe_id, on_update };\n    this.client = make_client(ops);\n  }\n\n  renderClick() {\n    // eslint-disable-next-line no-new-func\n    let text = this.editorText;\n\n    let code = Babel.transform(text, { presets: [\"react\"] }).code;\n    console.log(\"Got code:\");\n    console.log(code);\n    let El = eval(code);\n\n    console.log(\"Setting render element \");\n    this.renderElement = El;\n    this.setState(state => state);\n  }\n\n  render() {\n    return (\n      <div style={{ margin: \"30px\" }}>\n        {\" \"}\n        <Button onClick={\n            (function(){this.setState((state)=> { return {isOpen : !state.isOpen}})}).bind(this)}>\n          {this.state.isOpen ? \"Hide Config\" : \"Show Config\"} \n        </Button> \n\n        <Divider/> \n\n\n        <Collapse\n          isOpen={this.state.isOpen}\n          keepChildrenMounted={true}\n        >\n          <button\n            id=\"button\"\n            style={{ marginBottom: \"5px\" }}\n            onClick={this.makeSS.bind(this)}\n          >\n            Connect\n          </button>\n          <FormGroup label=\"URL\" labelFor=\"url\">\n            <InputGroup id=\"url\" placeholder=\"localhost\" />\n          </FormGroup>\n          <FormGroup label=\"Port\" labelFor=\"port\">\n            <InputGroup id=\"port\" placeholder={9005} />\n          </FormGroup>\n          <FormGroup label=\"Subscribe ID\" labelFor=\"sid\">\n            <InputGroup id=\"sid\" placeholder=\"main\" />\n          </FormGroup>\n          <button\n            id=\"button\"\n            style={{ marginBottom: \"5px\" }}\n            onClick={this.renderClick.bind(this)}\n          >\n            Render JSX\n          </button>\n\n          {this.getEditor()}\n        </Collapse>\n        <div\n          id=\"uiHolder\"\n          style={{ marginTop: \"10px\", backgroundColor: \"white\" }}\n        >\n          {this.renderElement(this.state.ui_state)}\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction InspectionUI() {\n  return <h1>You chose </h1>;\n}\n\nexport function SSInspector() {\n  var [state, update_state] = useState({});\n  var [configuring, update_configuring] = useState(true);\n\n  if (configuring) {\n    return <ConfigurationUI update={update_configuring} />;\n  } else {\n    return <InspectionUI />;\n  }\n}\n\n/* \n\nlet getNodes = str =>\n  new DOMParser().parseFromString(str, \"text/html\").body.childNodes;\nlet createJSX = nodeArray => {\n  const className = nodeArray[0].className;\n  return nodeArray.map(node => {\n    let attributeObj = {};\n    const { attributes, localName, childNodes, nodeValue } = node;\n    if (attributes) {\n      Array.from(attributes).forEach(attribute => {\n        if (attribute.name === \"style\") {\n          let styleAttributes = attribute.nodeValue.split(\";\");\n          let styleObj = {};\n          styleAttributes.forEach(attribute => {\n            let [key, value] = attribute.split(\":\");\n            styleObj[key] = value;\n          });\n          attributeObj[attribute.name] = styleObj;\n        } else {\n          attributeObj[attribute.name] = attribute.nodeValue;\n        }\n      });\n    }\n    return localName\n      ? React.createElement(\n          localName,\n          attributeObj,\n          childNodes && Array.isArray(Array.from(childNodes))\n            ? createJSX(Array.from(childNodes))\n            : []\n        )\n      : nodeValue;\n  });\n};\n\nexport const StringToJSX = props => {\n  return createJSX(Array.from(getNodes(props.domString)));\n};\n*/\n","\"use strict\";\n/*\nWed Mar 18 23:58:08 2020\nSheun Aluko\n@copyright sattsys\n\nA decentralized, asynchronous, cross platform (serialized)\ncommunication infrastructure (hyperloop)\nwritten in typescript\n\n*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst util = __importStar(require(\"../utils/index\"));\nclass Client {\n    constructor(ops) {\n        this.ops = ops;\n        this.log = util.get_logger(\"hlc_\" + ops.id);\n        //initialize objects\n        this.lobby = {};\n        this.function_table = {};\n        this.conn = null;\n        //registration promise will be set in connect and can be awaited for better async\n        var fullfill_registration = null;\n        this.registration_promise = new Promise((resolve, reject) => {\n            fullfill_registration = resolve;\n        });\n        this.fullfill_registration = fullfill_registration; //get copy so we can resolve later\n    }\n    connect() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.log.d(\"!!!\");\n            let url = `ws://${this.ops.host}:${this.ops.port}`;\n            /*\n                Perform the websocket connection\n                */\n            var WebSocket = null;\n            WebSocket = window.WebSocket;\n            this.log.d(\"Attempting connection to url: \" + url);\n            var ws = new WebSocket(url);\n            this.conn = ws;\n            //now we set the callbacks\n            ws.onopen = function open() {\n                this.log.d(\"Connection successful\");\n                //send a registration message now via the protocol\n                this.register();\n            }.bind(this);\n            ws.onmessage = function message(event) {\n                let _msg = event.data;\n                if (!_msg) {\n                    return;\n                }\n                this.log.d(\"got message:\");\n                this.log.d(_msg);\n                let msg = JSON.parse(_msg);\n                this.log.d(\"Parsed:\");\n                this.log.d(msg);\n                switch (msg.type) {\n                    case \"call\":\n                        this.handle_call(msg);\n                        break;\n                    case \"registered\":\n                        this.log.d(\"Received registered ack\");\n                        this.fullfill_registration(\"REG COMPLETE\");\n                        break;\n                    case \"return_value\":\n                        this.handle_return_value(msg);\n                        break;\n                    default:\n                        this.log.d(\"Unrecognized message type:\");\n                        this.log.d(message);\n                }\n            }.bind(this);\n            ws.onclose = function close() {\n                this.log.d(\"The ws connection was closed\");\n            }.bind(this);\n            return this.registration_promise;\n        });\n    }\n    handle_call(msg) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.log.d(\"Received call request\");\n            /*\n                 Lookup the function in the function table\n                 and run it with the given args  asyncrhonously,\n                 and after the return value is retrieved then\n                 we send a message back with the type \"return_value\"\n                 and fields call_identifier, data\n                */\n            let { args, call_identifier, id } = msg;\n            let fn_info = this.function_table[id];\n            //check if args has a logger\n            if (!args) {\n                args = {};\n            }\n            if (!args.log) {\n                this.log.d(\"Setting logger of async handler\");\n                args.log = this.log;\n            }\n            var _msg = null;\n            if (!fn_info) {\n                //for some reason the function does not exist\n                _msg = {\n                    data: {\n                        error: true,\n                        reason: \"endpoint_reported_no_exist\"\n                    },\n                    call_identifier,\n                    type: \"return_value\"\n                };\n                this.send(_msg);\n                this.log.d(\"Could not find so sent error\");\n                return;\n            }\n            //the function does exist... in this case we async it\n            //then\n            this.log.d(\"Running handler\");\n            let result = yield fn_info.handler(args);\n            this.log.d(\"Got result: \");\n            this.log.d(result);\n            _msg = {\n                data: {\n                    error: false,\n                    result\n                },\n                call_identifier,\n                type: \"return_value\"\n            };\n            this.log.d(\"Sending result to hub:\");\n            this.log.d(_msg);\n            this.send(_msg);\n        });\n    }\n    handle_return_value(msg) {\n        /*\n            We have in the past called await call(...)\n            and we will be retrieving return info here\n    \n            1st we check the LOBBY for the call_identifier,\n            then we RESOLVE the associated promise\n            */\n        this.log.d(\"Got return value: \");\n        this.log.d(msg);\n        let { call_identifier, data } = msg;\n        let { promise, promise_resolver } = this.lobby[call_identifier];\n        promise_resolver(data);\n        this.log.d(\"Resolved promise with returned data\");\n        //clean\n        this.lobby[call_identifier] = undefined;\n    }\n    send(msg) {\n        if (!this.conn) {\n            throw \"Ws connection has not been initialized\";\n        }\n        this.conn.send(JSON.stringify(msg));\n    }\n    register() {\n        let msg = {\n            type: \"register\",\n            id: this.ops.id || \"anon\"\n        };\n        this.send(msg);\n        this.log.d(\"Sent register message:\\n\" + JSON.stringify(msg));\n    }\n    register_function(ops) {\n        //add the id to the LOCAL function table\n        //build a register request object and send it\n        let { id, args_info, handler } = ops;\n        let msg = {\n            id,\n            args_info,\n            type: \"register_function\"\n        };\n        this.send(msg);\n        this.log.d(\"Sent register function message\");\n        this.log.d(msg);\n        //update the function table\n        this.function_table[id] = { args_info, handler };\n        this.log.d(\"Added function to local function table\");\n        this.log.d(this.function_table);\n    }\n    get_available_functions() {\n        return __awaiter(this, void 0, void 0, function* () {\n            //generate a call_id\n            let call_identifier = this.gen_call_id();\n            //generate the message\n            let msg = {\n                type: \"list_functions\",\n                call_identifier\n            };\n            this.send(msg);\n            this.log.d(\"Sent list_functions request\");\n            this.log.d(msg);\n            //create the promise we will return\n            //and get out a reference to its resolver\n            var promise_resolver = null;\n            let promise = new Promise((resolve, reject) => {\n                promise_resolver = resolve;\n            });\n            //update the lobby since we will be waiting for a response\n            this.lobby[call_identifier] = { promise, promise_resolver };\n            this.log.d(\"Updated lobby to await async response\");\n            //return the promise\n            return promise;\n        });\n    }\n    /*\n      Allows this client to asynchronously query the hyperloop for some function call\n    */\n    call(ops) {\n        return __awaiter(this, void 0, void 0, function* () {\n            //generate the call_identifier\n            let call_identifier = this.gen_call_id();\n            //build the appropriate message to call a funciton on the server side\n            let { id, args } = ops;\n            let msg = {\n                id,\n                args,\n                type: \"call\",\n                call_identifier\n            };\n            //create a promise and promise resolver\n            var promise_resolver = null;\n            var promise = new Promise((resolve, reject) => {\n                promise_resolver = resolve;\n            });\n            //store  the promise resolver under the the call_identifier in the lobby\n            this.lobby[call_identifier] = { promise, promise_resolver };\n            //send the message\n            this.send(msg);\n            //return the promise\n            return promise;\n        });\n    }\n    await_registration() {\n        return this.registration_promise;\n    }\n    gen_call_id() {\n        return util.uuid();\n    }\n}\nexports.Client = Client;\n//# sourceMappingURL=web_client.js.map","//Tue Oct  2 18:06:09 PDT 2018\n//General JS utils file \n//would like to try creating soft?hard? links so that the utils files can be shared \n\n\nvar global_debug = true \n\nvar  log = console.log  \n\nfunction set_debug(b) {\n    global_debug = b \n} \n\n\n\nfunction bug(tag,...msg) { \n    if (global_debug) { \n\tconsole.log(\"<- \" + tag + \" ->\" )\n\tfor (var i = 0 ; i < msg.length ; i++) { \n\t    console.log(msg[i])\n\t}\n\tconsole.log(\"<- \" + tag + \" ->\" )\n    }\n}\n\nfunction debug(msg) { \n    if (global_debug) {\n\tconsole.log(msg) \n    }\n}\n\nfunction and(...args) { \n    var ret = true \n    for (var i=0;i<args.length;i++) { \n\tret =  ret && args[i]\n    }\n    return ret ? true : false \n} \n\nfunction array_and(arr) { \n    var ret = true \n    for (var i=0;i<arr.length;i++) { \n\tret =  ret && arr[i]\n    }\n    return ret ? true : false\n}\n\nfunction apply(f,args) { \n    return f.apply(null,args)\n}\n\nfunction avg(arr) { \n    var sum = 0;\n    for( var i = 0; i < arr.length; i++ ){\n\tsum += arr[i]\n    }\n    return sum/arr.length \n}\n\nfunction multiply(arr) { \n    var ret = 1 ; \n    for (var i =0; i < arr.length ; i++ ) { \n\tret *= arr[i]\n    }\n    return ret \n}\n\nfunction rms(arr) { \n    var sum = 0;\n    for( var i = 0; i < arr.length; i++ ){\n    \tsum += arr[i]*arr[i]\n    }\n    return Math.sqrt(sum/arr.length)\n}\n\nfunction variance(arr) { \n    var _avg = avg(arr)\n    var sum = 0 \n    for( var i = 0; i < arr.length; i++ ){\n\tsum += Math.pow(arr[i] - _avg, 2)\n    }\n    return sum/arr.length \n} \n\nfunction std(arr) { \n    return Math.sqrt(variance(arr))\n} \n\nfunction take(coll,num) { \n    var ret = Array(num).fill(0) \n    for (var i =0;i<num; i++) { \n\tret[i] = coll[i]\n    }\n    return ret \n} \n\nfunction arr_mult(arr,x) { \n    return arr.map( y => y /x ) \n}\n\nfunction perf(f) { \n    var num_times = 20000\n    var results = Array(num_times).fill(0) \n    for (var i = 0 ; i < num_times ; i++ ) { \n\tvar t0 = performance.now();\n\tvar result = f() \n\tvar t1 = performance.now();\n\tresults[i] = t1 - t0 \n    } \n    return avg(results) \n} \n\nfunction arr_range(arr) { \n    return apply(Math.max, arr) - apply(Math.min, arr)\n}\n\nfunction range(a,b) { \n    var len = b - a \n    var ret = Array(len).fill(0)  ; \n    for (var i = 0 ; i< len ; i++) {  \n\tret[i] = a + i \n    }\n    return ret \n} \n\nfunction first(d) { \n    return d[0]\n} \n\nfunction second(d) { \n    return d[1]\n} \n\nfunction rest(d) {  d.slice(1) }    \n\nexport function first_upper_case(s) { \n    return s.charAt(0).toUpperCase() + s.slice(1);\n}\n\nexport function identity(x) { return x } \n\nfunction last(d) { \n    return d[d.length - 1 ] \n} \n\nfunction zip_map(ks,vs) { \n    var result = {} \n    for (var i = 0 ; i < ks.length; i ++ ) { \n\tresult[ks[i]] = vs[i]\n    }\n    return result\n}\n\nfunction zip(xs,ys) { \n    return xs.map(function(x,i) { \n\treturn [x, ys[i]]\n    }) \n}\n\nfunction dict_2_vec(d) { \n    var ret = [] ; \n    for (var k in d) { \n\tret.push([ k, d[k] ]) \n    } \n    return ret \n}\n\nfunction number_or_self(d) { \n    var val = Number(d) \n    if (isNaN(val)) {\n\treturn d \n    } else { \n\treturn val \n    } \n}\n\nfunction d_map(d,f) { \n    for (var k in d) {\n\td[k] = f(d[k])\n    }\n    return d \n}\n\nfunction dict_vals_2_num(d) { \n    return d_map(d,number_or_self) \n}\n\nfunction diff(d) { \n    var r =   Array(d.length - 1).fill(0) \n    for (var i = 1 ; i < d.length ; i ++ ) { \n\tr[i-1] = d[i] - d[i-1]\n    }\n    return r \n}\n\nfunction max(d) { \n    var curr_max = d[0] \n    \n    for (var i=1;i<d.length;i++) { \n\tif (d[i] > curr_max) { curr_max = d[i] }\n    } \n    \n    return curr_max \n} \n\nfunction min(d) { \n    var curr_min = d[0] \n    \n    for (var i=1;i<d.length;i++) { \n\tif (d[i] < curr_min) { curr_min = d[i] }\n    } \n    \n    return curr_min\n    \n} \n\nfunction merge(a,b) { \n    var result = Object.assign({},a,b)\n    return result\n}\n\nfunction cycle_array(a,v) { \n    a.push(v)\n    a.shift() \n    return a \n} \n\n\n\n\nfunction loop_fn(coll,fn,num) { \n    var l = coll.length\n    var ret = Array(l).fill(0) \n    for (var i=num ; i < l ; i ++) { \n\tret[i] = fn(coll.slice(i-num,i))\n    }\n    return ret \n} \n\n\n\n\n\nfunction get_series(coll , field) { \n    return coll.map(e=>e[field])\n}\n\n\n\n\nfunction std_percent_diff(arr) { \n    // Meant to be a magnitude normalized average derivative of an array \n    // calculates the vector of percentage differences (consecutive indeces) \n    // then gets the std of those \n    var tmp = Array(arr.length - 1 ).fill(NaN) \n    for (var i =0 ; i < tmp.length ; i ++ ) { \n\ttmp[i] =  (arr[i+1]-arr[i])/arr[i]\n    }\n    \n    return std(tmp)\n}\n\nfunction array_percent_diff(a1, a2 ) { \n    var ret = Array(a2.length).fill(0) \n    for (var i=0; i<ret.length; i++) { \n\tret[i] = (a2[i]-a1[i])/a1[i]\n    }\n    return ret \n} \n\nfunction array_log_diff(a1, a2 ) { \n    var ret = Array(a2.length).fill(0) \n    for (var i=0; i<ret.length; i++) { \n\tret[i] = Math.log(a2[i]) - Math.log(a1[i])\n    }\n    return ret \n} \n\nfunction cv(arr) { \n    return std(arr)/avg(arr)\n}\n\nfunction cv_matrix(matrix) { \n\n    let num_els = matrix[0].length \n    var result = Array(num_els).fill(null)\n    \n    for (var e =0; e < num_els ; e ++ ) { \n\tlet el_array = matrix.map( arr => arr[e]  ) \n\tresult[e] = cv(el_array)\n    }\n    \n    return result\n} \n\nfunction log_diff_half_buff(buff) { \n    //splits buffer in half, averages two halves, then calcs log diff of both halves \n    let split = Math.ceil(buff.length/2)  \n    let fh = take(buff,split) \n    let sh = buff.slice(-(buff.length - split))\n    return Math.log(avg(sh)) - Math.log(avg(fh))\n}\n\nfunction spd_matrix(matrix) { \n    // foo\n    let num_els = matrix[0].length \n    var result = Array(num_els).fill(null)\n    \n    for (var e =0; e < num_els ; e ++ ) { \n\tlet el_array = matrix.map( arr => arr[e]  ) \n\tresult[e] = std_percent_diff(el_array)\n    }\n    \n    return result\n} \n\nfunction matrix_map(matrix,f) { \n    let num_els = matrix[0].length \n    var result = Array(num_els).fill(null)\n    for (var e =0; e < num_els ; e ++ ) { \n\tlet el_array = matrix.map( arr => arr[e]  ) \n\tresult[e] = f(el_array)\n    }\n    return result\n} \n\nfunction matrix_mapper(f) { \n    return function(m) {return matrix_map(m,f)}\n} \n\n\n// define ui utilities now ------------> \n\nfunction dom(s) { \n    return document.createElement(s) \n} \n\nfunction set_inner_html(d,thang) { \n    if (thang instanceof HTMLElement) { \n\td.appendChild(thang) \n    } else { \n\td.innerHTML = thang \n    } \n    \n} \n\nfunction flex_row(num,id_base,f) { \n    var container, i \n    container = dom(\"div\")  \n    //container.className = \"flex-row\"  // see styles.css   \n    container.style = \"display : flex ; flex-wrap : nowrap ; flex-direction : row ; flex-grow : 1 \"\n        \n    for (i =0 ; i < num ; i ++ ) { \n\tvar d = dom(\"div\") \n\td.style = \"flex-grow : 1\"\n\tvar html = f(i,d) \n\tif (html) { \n\t    set_inner_html(d, html) \n\t} \n\tcontainer.appendChild(d) \n    } \n    return container  \n}\n\n\n/* \n * Create a flexbox of divs [m,n] in shape \n * @param {Function} f - accepts row, column, and HTMLelement. Can either mutate the el or return an new el (which will be appended to div at spot r,c) or return String (which will be set to innerHTML) \n */ \nfunction make_div_array(m,n,id_base,f) { \n    var container, i \n    \n    container = dom(\"div\")  \n    //container.className = \"flex-column\"  // see styles.css  \n    container.id = id_base \n    \n    container.style = \"width: 100% ; height : 100% ; display : flex ; flex-wrap : nowrap ; flex-direction : column \"\n    \n    // now we will add in the child elements \n    for (i =0 ; i < m ; i ++ ) { \n\t\n\t//f is a function which takes a row and column and element \n\t//build a function that takes just a col with row hard coded \n\t//and returns f(r,col)\n\tvar fn = function(col,el) {\n\t    return f(i,col,el) \n\t}\n\t\n\tvar new_id_base = id_base + \"_\" +  i + \",\" \n\tvar row = flex_row(n,new_id_base , fn )\n\tcontainer.appendChild(row) \n    }\n    \n    return container\n    \n\n} \n\nfunction id_from_loc(m,n,c) { \n    return c*m + n   // intersing that this function needs arg c, which is (static) number of cols \n}\n\nfunction test_div_array(m,n) { \n    var f = function(r,c,el) { \n\treturn (id_from_loc(r,c,n)).toString()\n    } \n\n    return make_div_array(m,n,\"foo\", f) \n    \n} \n\t\nfunction app_clear() { \n    var app = document.getElementById(\"app\");\n    while (app.firstChild) {\n\tapp.removeChild(app.firstChild);\n    }   \n}\n\nfunction app_render(el) { \n    app_clear() \n    var app = document.getElementById(\"app\")  \n    app.appendChild(el) \n}\n\nvar colors = [\"black\" , \"blue\" , \"red\" , \"green\" , \"yellow\" , \"orange\"]\n\nfunction get_colors(num) { \n    return take(colors, num) \n}\n\nfunction now() { \n    return (new Date()).getTime()    \n}\n///   extensions \n\n\n// Array.prototype.first = function(arr) { \n//     return arr[0] \n// }\n\n\nfunction click_id(id) {\n    let el = document.getElementById(id) \n    console.assert(el) \n    el.click() \n}\n\nfunction delay(ms) { \n    return new Promise( (resolve, reject) => { \n\tsetTimeout( function() { resolve(true) } , ms )\n    })\n}\n\nfunction get_ms() { \n    return new Date().getTime() \n}\n\nfunction loop_until_true(f,rate ,timeout) { \n    var t_start = get_ms() \n    let p = new Promise((resolve ,reject) =>   { \n\tlet id = setInterval( function(){ \n\t    let t_now  = get_ms() \n\t    if (f()) { \n\t\t//condition is met \n\t\tsetTimeout( function() {clearInterval(id)} , 1) \n\t\tresolve(false) \n\t    }  else { \n\t\tlet elapsed =  t_now - t_start\n\t\tif (elapsed  >= timeout ) { \n\t\t    setTimeout( function() {clearInterval(id)} , 1) \n\t\t    resolve(true) // reports an timeout\n\t\t}\n\t    }\n\t},rate) \n    }) \n    //return the promise now \n    return p\n}\n\nfunction map_indexed(arr,f) { \n    let ret = Array(arr.length).fill(null)\n    for (let i = 0; i < arr.length ; i ++ ) { \n\tret[i] = f(i,arr[i])\n    }\n    return ret \n}\n\nfunction merge_arrays(...args) { \n    let arr_1 = first(args) \n    \n}\n\nfunction map_dict(dic,f) { \n    //f is a function that takes \n    let ks = Object.keys(dic) \n    let vs = ks.map(k=>dic[k])\n    \n    \n    \n}\n\nfunction assign_to_window(var_name, val) { \n    if (! window[var_name ] ) { \n\twindow[var_name] = val\n    } else { \n\t//log(\"Could not assign: \" + var_name ) \n\twindow[var_name] = val\n\tlog(\"(Re)Defining: \" + var_name ) \n    }\n} \n\nfunction reload() { \n    window.location  = window.location \n}\n\nexport function set_difference(s1,s2) { \n    let ret = new Set() \n    for (let el of s1 ) { \n\tif (!s2.has(el) ) {\n\t    ret.add(el)\n\t}\n    }\n    return ret   \n}\n\n\nexport function get_logger(name) { \n    let header = \"[\" + name + \"]:: \" \n    \n    let l = function(t,m) { \n\tif (typeof(m) == 'string' ) { \n\t    console[t](header + m)   //adds header if string\n\t}\n\telse { \n\t    console[t](header +\"~>\")       //if not prints header first \n\t    console[t](m)\n\t}\n    }\n\n    let i = function(m) { l(\"info\",m) } \n    let d = function(m) { l(\"debug\", m) } \n    \n    return { i, d } \n} \n\n\n\n\nexport { set_debug, bug, debug, and, array_and, apply, avg, multiply, rms, variance, std, take, arr_mult, perf, arr_range, range, first, second, last, zip_map, zip, dict_2_vec, number_or_self, d_map, dict_vals_2_num, diff, max, min, merge, cycle_array, loop_fn, get_series, std_percent_diff, array_percent_diff, array_log_diff, cv, cv_matrix, log_diff_half_buff, spd_matrix, matrix_map, matrix_mapper, dom, set_inner_html, flex_row, make_div_array, id_from_loc, test_div_array, app_clear, app_render, get_colors, now, click_id, delay, loop_until_true, assign_to_window}\n","var map = {\n\t\"./default.jsx\": 282,\n\t\"./dispatch_builder.jsx\": 283,\n\t\"./javascript_echo.jsx\": 284\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 281;","import React from \"react\";\nimport { useSelector } from \"react-redux\";\n\nfunction UI(props) {\n  var state = useSelector(state => state);\n\n  return (\n    <div>\n      <h1>DEFAULT</h1>\n      <p>{JSON.stringify(state[\"subscriptions\"][props.subscribe_id])}}</p>\n    </div>\n  );\n}\n\nexport default UI;\n","import React from \"react\";\n\nfunction UI() {\n  return (\n    <div>\n      <h1>THIS IS THE UI FOR THE DISPATCH BUILDER</h1>\n    </div>\n  );\n}\n\nexport default UI;\n","import React from \"react\";\nimport { useSelector } from \"react-redux\";\n\nfunction UI(props) {\n  var state = useSelector(state => state[\"subscriptions\"][props.subscribe_id]);\n  var items = state.items;\n\n  return (\n    <div>\n      <h1>Javascript Echo</h1>\n      <p> {items[items.length - 1].time}</p>\n      <p> You said => {items[items.length - 1].text}</p>\n    </div>\n  );\n}\n\nexport default UI;\n","// require all modules on the path and with the pattern defined\nconst req = require.context(\"../components/commands/\", true, /.jsx$/);\n\nvar modules = {} \n\nreq.keys().map(function(n) { \n    var k = n.replace(\"./\",\"\").replace(\".jsx\",\"\")\n    modules[k] = req(n).default \n})\n\n// export \nmodule.exports = modules\n\n\n\n\n\n","\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst logger = __importStar(require(\"./logger\"));\nconst logger_1 = require(\"./logger\");\nexports.Logger = logger_1.Logger;\nconst uuid_1 = require(\"uuid\");\n/**\n * Returns a logger instance\n *\n * @export\n * @param {string} name\n * @returns\n */\nfunction get_logger(name) {\n    return logger.make_logger(name);\n}\nexports.get_logger = get_logger;\nfunction string_contains_any(val, arr) {\n    let ret = false;\n    for (let i of arr) {\n        var res = (val.indexOf(i) > -1);\n        ret = ret || res;\n    }\n    if (ret) {\n        return true;\n    }\n    else {\n        return false;\n    }\n}\nlet arithmetic_ops = ['+', '-', '/', '*'];\n/**\n * Checks if a string has any arithmetic operations in it\n *\n * @export\n * @param {*} text\n * @returns {Boolean}\n */\nfunction has_arithmetic(text) {\n    return string_contains_any(text, arithmetic_ops);\n}\nexports.has_arithmetic = has_arithmetic;\n/**\n * Unsafe nodejs evaluation\n *\n * @export\n * @param {string} text\n * @returns {*}\n */\nfunction _eval(text) {\n    return eval(text);\n}\nexports._eval = _eval;\n/**\n * Returns last element of an array\n *\n * @export\n * @param {any[]} arg\n * @returns {*}\n */\nfunction last(arg) {\n    let len = arg.length;\n    return arg[len - 1];\n}\nexports.last = last;\n/**\n * Updates an object at the specified (nested?) path using the specified function. The function will operate on the existing value and the returned value will be set as the new value\n *\n * @export\n * @param {{[k: string] : any}} obj\n * @param {string[]} path\n * @param {(arg: any) => any} fn\n */\nfunction update_in(obj, path, fn) {\n    var tmp = obj;\n    //traverse the path \n    for (var i = 0; i < path.length - 1; i++) {\n        //If the path does not exist we create it \n        if (!tmp[path[i]]) {\n            tmp[path[i]] = {};\n        }\n        //then traverse one level \n        tmp = tmp[path[i]];\n    }\n    //get the leaf  \n    let key = last(path);\n    let leaf = tmp[key];\n    //operate on the leaf \n    let result = fn(leaf);\n    //and then we update the object at that leaf \n    tmp[key] = result;\n    //do not return anything (modify object in place)\n}\nexports.update_in = update_in;\n/**\n * Get nested path in an object using path = string[] (if it exists)\n *\n * @export\n * @param {{[k: string] : any}} obj\n * @param {string[]} path\n * @returns {*}\n */\nfunction get_in(obj, path) {\n    var tmp = obj;\n    //traverse the path (note i range is larger than update_in)\n    for (var i = 0; i < path.length; i++) {\n        //If the path does not exist we return null  \n        if (!tmp[path[i]]) {\n            return null;\n        }\n        //traverse one level \n        tmp = tmp[path[i]];\n    }\n    return tmp;\n}\nexports.get_in = get_in;\n/**\n * Converts an Object UPDATE TYPE from array form (path with value) to object form (nested object\n * Useful for working with socksync\n *\n * @export\n * @param {array_object_update} array_update\n * @returns {dictionary_object_update}\n */\nfunction array_update_to_object_update(array_update) {\n    let { path, value } = array_update;\n    var tmp = {};\n    //traverse the path \n    for (var i = 0; i < path.length - 1; i++) {\n        //build the key \n        tmp[path[i]] = {};\n        //then traverse one level \n        tmp = tmp[path[i]];\n    }\n    //assign the leaf  \n    let key = last(path);\n    tmp[key] = value;\n    //return \n    return tmp;\n}\nexports.array_update_to_object_update = array_update_to_object_update;\nfunction object_update_to_array_update(obj) {\n    var path = [];\n    var tmp = obj;\n    var done = false;\n    while (tmp.constructor == Object) {\n        var ks = Object.keys(tmp);\n        if (ks.length != 1) {\n            //will assume that the current object should be returned \n            break;\n        }\n        else {\n            path.push(ks[0]);\n            tmp = tmp[ks[0]];\n        }\n    }\n    return { path, value: tmp };\n}\nexports.object_update_to_array_update = object_update_to_array_update;\nfunction ms() {\n    return new Date().getTime();\n}\nexports.ms = ms;\nfunction sets_equal(as, bs) {\n    if (as.size !== bs.size)\n        return false;\n    for (var a of as)\n        if (!bs.has(a))\n            return false;\n    return true;\n}\nexports.sets_equal = sets_equal;\nfunction set(...args) {\n    return new Set(args);\n}\nexports.set = set;\n/*\n\nFuncitonal style patterns (inspired by clojure)\n\n*/\n/**\n * Parition a list of things into sub lists each of length 'num'\n *\n * @export\n * @template T\n * @param {T[]} thing\n * @param {number} num\n * @returns\n */\nfunction partition(thing, num) {\n    var result = [];\n    var current_sub_array = [];\n    for (var i = 0; i < thing.length; i++) {\n        if ((i + 1) % num == 0 && i != 0) {\n            current_sub_array.push(thing[i]);\n            result.push(current_sub_array);\n            current_sub_array = [];\n        }\n        else {\n            current_sub_array.push(thing[i]);\n            if (i == thing.length - 1) { //end\n                result.push(current_sub_array);\n            }\n        }\n    }\n    return result;\n}\nexports.partition = partition;\nfunction uuid() {\n    return uuid_1.v4();\n}\nexports.uuid = uuid;\n/*\n source from: https://gist.github.com/kethinov/6658166\n*/\nvar path = require('path');\nvar fs = require('fs');\nexports.walkSync = (dir, filelist = []) => {\n    fs.readdirSync(dir).forEach((file) => {\n        let name = path.join(dir, file);\n        let basename = path.basename(name);\n        let prefix = basename.substring(0, 2);\n        if (prefix == \".#\") {\n            return;\n        } //ignore the emacs hidden files (threw errors)\n        filelist = fs.statSync(name).isDirectory()\n            ? exports.walkSync(path.join(dir, file), filelist)\n            : filelist.concat(path.join(dir, file));\n    });\n    return filelist;\n};\nfunction rec_find_dir_ext(dir, ext) {\n    return exports.walkSync(dir).filter((file) => (file.substr(-1 * (ext.length + 1)) == '.' + ext));\n}\nexports.rec_find_dir_ext = rec_find_dir_ext;\n/*\nSTRINGS\n*/\nfunction str_empty(s) {\n    return s == '';\n}\nexports.str_empty = str_empty;\nfunction str_not_empty(s) {\n    return !str_empty(s);\n}\nexports.str_not_empty = str_not_empty;\nfunction trim(s) {\n    return s.trim();\n}\nexports.trim = trim;\nfunction char_replacer(c, rep) {\n    return function (s) {\n        return s.replace(new RegExp(c, 'g'), rep);\n    };\n}\nexports.char_replacer = char_replacer;\nfunction char_remover(c) {\n    return char_replacer(c, \"\");\n}\nexports.char_remover = char_remover;\n//# sourceMappingURL=index.js.map","import React from \"react\";\nimport { useSelector } from \"react-redux\";\n\nfunction Home() {\n  var msg = useSelector(state => state.message);\n\n  return (\n    <div>\n      <h1>vcs</h1>\n    </div>\n  );\n}\n\nexport default Home;\n\n\n","import React from \"react\";\nimport { useSelector } from \"react-redux\";\n\nimport command_manifest from \"../js/command_manifest.js\";\n\nvar log = function(x) {\n  window.vcs_ui.log(x);\n};\n\nfunction CmdWrapper(props) {\n  var state = useSelector(state => state);\n  if (state.subscriptions[props.subscribe_id]) {\n    return <props.Renderer subscribe_id={props.subscribe_id} />;\n  } else {\n    return <h1>Awaiting State</h1>;\n  }\n}\n\nfunction CmdsContainer() {\n  var active_ids = useSelector(state => state.active_ids);\n\n  var cmd_uis = active_ids.map(function(id) {\n    let cmd = id\n      .split(\"_\")\n      .slice(0, -1)\n      .join(\"_\");\n    var Renderer = null;\n\n    if (!command_manifest[cmd]) {\n      log(\"!! Could not find matching interface for cmd: \" + cmd);\n      Renderer = command_manifest[\"default\"];\n    } else {\n      //1\n      log(\"Found matching command interface for: \" + cmd);\n      Renderer = command_manifest[cmd];\n    }\n\n    return (\n      <CmdWrapper Renderer={Renderer} subscribe_id={id} key={id}></CmdWrapper>\n    );\n  });\n\n  return <div className=\"commandsContainer\">{cmd_uis}</div>;\n}\n\nexport default CmdsContainer;\n","import React, { Component } from \"react\";\nimport { Launcher } from \"react-chat-window\";\nimport { useSelector } from \"react-redux\";\n\nvar log = function(x) {\n  window.vcs_ui.log(x);\n};\n\n//https://www.npmjs.com/package/react-chat-window (source code)\nclass ChatBox extends Component {\n  constructor() {\n    super();\n    this.state = {\n      messageList: []\n    };\n\n    //init ws and connect with the vcs text endpoint here\n    var ws = new WebSocket(\"ws://localhost:9001\");\n\n    //and configure call backs\n    ws.onopen = function() {\n      log(\"ChatBox Connected to VCS text ws server\");\n    };\n    ws.onmessage = function(m) {\n      var msg = JSON.parse(m.data);\n      log(\"ChatBox Received message:\");\n\n      console.log(msg);\n\n      switch (msg.type) {\n        case \"output\":\n          log(\"ChatBox rendering output: \" + msg.text);\n          this._sendMessage(msg.text);\n          break;\n        case \"unrecognized_input\":\n          this._sendMessage(\"What?\");\n          break;\n\n        case \"params\":\n          break;\n\n        case \"command_result\":\n          log(\"ChatBox got command result:\");\n          console.log(msg.result);\n\n        default:\n          log(\n            \"ChatBox Received unrecognized message type \" +\n              msg.type +\n              \" from vcs server\"\n          );\n      }\n    }.bind(this);\n\n    ws.onclose = function() {\n      log(\"ChatBox websocket CLOSING! !! \");\n    };\n\n    this.ws = ws;\n  }\n\n  _onMessageWasSent(message) {\n    this.setState({\n      messageList: [...this.state.messageList, message]\n    });\n\n    log(\"ChatBox detected msg sent: \");\n    console.log(message);\n    let type = \"vcs_text\";\n    let text = message.data.text;\n    this.ws.send(JSON.stringify({ type, text }));\n    log(\"Send ws message: \");\n    console.log({ type, text });\n  }\n\n  _sendMessage(text) {\n    if (text.length > 0) {\n      this.setState({\n        messageList: [\n          ...this.state.messageList,\n          {\n            author: \"them\",\n            type: \"text\",\n            data: { text }\n          }\n        ]\n      });\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <Launcher\n          agentProfile={{\n            teamName: \"VCS Chat\"\n            //imageUrl: 'https://a.slack-edge.com/66f9/img/avatars-teams/ava_0001-34.png'\n          }}\n          onMessageWasSent={this._onMessageWasSent.bind(this)}\n          messageList={this.state.messageList}\n          showEmoji\n        />\n      </div>\n    );\n  }\n}\n\nexport default ChatBox;\n","import React from 'react';\nimport Terminal from 'terminal-in-react';\n\n\nimport * as vcs_tc from \"../ts/dist/vcs_text_client\"  \nimport * as util from \"../js/vcs_client/utils.js\" \n\nvar log = util.get_logger(\"term\") \n\n  \nexport function TerminalWidget() { \n\n\n    var vcs_params = null \n    \n    //feedback handler \n    function handle_feedback({payload}) { \n\treturn \"@::\" + payload \n    }\n\n    function handle_text({payload}) { \n\treturn payload \n    }\n\n\n    //define message handler   \n    let response_dict = { \n\t\"text\"  : handle_text , \n\t\"feedback\" :  handle_feedback , \n\t\"unrecognized_input\" : ()=>\"what?\" , \n\t\"params\" : function(params) { \n            log.i(\"Received params\") \n            vcs_params = params\n            log.i(\"Params updated\") \n\t} , \n\t\"command_result\" : function({payload,id}) { \n            log.d(\"Got command result:\")\n            log.d(payload) \n            //check the result  \n            if(payload.quiet) { \n\t\tlog.i(\"Command suppressed output\") \n\t\treturn null \n            } else { \n\t\treturn \"[CMD Result]:: \" + payload.result\n            }\n\t} , \n    }\n\n\n\n    var on_terminal_msg = function(m) {   //will get reset (this function writes to terminal) \n\t\n    }\n\t\t\t\t\n    function on_msg(msg) {   \n\t// msg = { type : string , data : string | number | bool | obj }  \n\tlog.d(\"Got ws msg:\") ;\n\tlog.d(msg) \n\n\tlet handler = response_dict[msg.type]  \n\tif (! handler ) { \n            on_terminal_msg(\"Received unrecognized message type \" + msg.type + \" from vcs server\")\n\t} else { \n            var result = handler(msg)       \n\t    on_terminal_msg(result) \n\t}\n    } \n    \n    \n    //init ws and connect with the vcs text endpoint here\n    var tc = new vcs_tc.VCS_TEXT_CLIENT({port : 9001 ,\n\t\t\t\t\t host : \"localhost\", \n\t\t\t\t\t id  : \"term\" , \n\t\t\t\t\t on_msg }) \n    \n    \n    //connect \n    tc.connect()\n    \n\t \n    var send_msg = function(text) { \n\tif (tc) {tc.send({text,type:\"vcs_text\"})}  else { \n            throw(Error(\"Not connected\")) \n\t}\n    }\n    \n    return ( <Terminal \n                  startState=\"maximised\" \n                  //watchConsoleLogging\n                  descriptions={{show : false }}\n            color='green'\n            backgroundColor='black'\n            barColor='black'\n            style={{ fontWeight: \"bold\", fontSize: \"1em\" , width :\"100%\" }}\n            commandPassThrough={(cmd, print) => {\n                // do something async\n                send_msg(cmd.join(\" \"))\n                //need to await the return then print it ... hmm.. \n                on_terminal_msg = print \n    //             print(`-PassedThrough:${cmd}: command not found`);\n              }}\n            \n          />\n        \n      );\n}\n","import React, { useState } from \"react\";\nimport Globe from \"react-globe.gl\";\n\nimport {\n  Button,\n  ControlGroup,\n  InputGroup,\n  Spinner , \n} from \"@blueprintjs/core\";\n\n/* \n    This program will allow you to visualize the path that\n    traceroute returns to any public domain \n\n    In order to request the traceroute information directly \n    from the web browser, we use the sattsys.hyperloop library, \n    which has been configured to expose the traceroute service \n\n    \n*/\n\nasync function traceroute(url) {\n  if  (!window.vcs.hyperloop) { \n      await window.vcs.hyperloop_connect() \n  }\n\n  return await window.vcs.hyperloop_call({\n    id: \"sattsys.hyperloop.traceroute\",\n    args: { url }\n  });\n}\n\n\nconst N = 3;\n\nfunction get_data() {\n    const arcsData = [...Array(N).keys()].map(() => ({\n        startLat: (Math.random() - 0.5) * 180,\n        startLng: (Math.random() - 0.5) * 360,\n        endLat: (Math.random() - 0.5) * 180,\n        endLng: (Math.random() - 0.5) * 360,\n        color: [\n          [\"red\", \"white\", \"blue\", \"green\"][Math.round(Math.random() * 3)],\n          [\"red\", \"white\", \"blue\", \"green\"][Math.round(Math.random() * 3)]\n        ]\n      }));\n    return arcsData \n} \n\nfunction parse_ip_locs(locs){\n    return locs.map(function(l) {\n        return {\n            latitude : Number(l.result.latitude),\n            longitude : Number(l.result.longitude)\n         } \n    })\n}\n\n\nfunction geo_data_to_arcs(geo_data) { \n    var arcs = [] \n    for (var i =0; i < geo_data.length -1 ;  i++ ) { \n        let curr = geo_data[i]\n        let next = geo_data[i+1]\n        arcs.push( {\n            startLat : curr.latitude , \n            startLng : curr.longitude , \n            endLat :   next.latitude , \n            endLng :   next.longitude ,  \n            color: [ \n                \"white\" , \n                [\"red\", \"black\", \"blue\", \"green\", \"orange\", \"yellow\"][Math.round(Math.random() * 3)]\n            ]\n              \n        }) \n    }\n    return arcs \n}\n\n\n\n\nexport function GlobeGl() {\n\n    var [data , setData ] = useState([]) \n\n\n    /*\n\n    setInterval( function() {\n        setData(get_data()) \n    } , 4000)\n\n    */ \n\n\n    var do_search = async function(setState) {  \n\n        setState({thinking : true }) \n\n        let url = document.getElementById(\"globe.traceroute.search\").value\n        console.log(\"Doing traceroute request with the url: \" + url) \n\n        setState({displaying : url }) \n\n        let trace_data = (await traceroute(url)).result\n        console.log(\"Got data...\") \n        console.log(trace_data) \n\n        let ips = trace_data.map(x=>x.ip).slice(1)\n        console.log(\"Got ips..\")\n        console.log(ips) \n\n        //need to translate the ips into geolocation data, \n        //and will use the hyperloop for that too \n\n        let promises = ips.map(ip=>window.vcs.hyperloop_call({id:\"sattsys.hyperloop.geolocate_ip\" , args : {ip } }))\n        let ip_locs = await Promise.all(promises) \n\n        console.log(\"Got ip locs: \") \n        console.log(ip_locs)\n\n        let geo_data = parse_ip_locs(ip_locs) \n        console.log(\"Got geo data:\" ) \n        console.log(geo_data) \n\n        let arcs = geo_data_to_arcs(geo_data) \n        console.log(\"Got arc data:\")\n        console.log(arcs) \n\n        console.log(\"Setting globe data\") \n        setData(arcs)\n\n        setState({thinking: false}) \n        \n\n    }\n\n\n    var SearchWidget = function() {\n\n        var [state, setState] = useState( {thinking : false , displaying : \"none\"  })\n\n        const style = { flexGrow: undefined };\n        return (\n          <div style={{ position: \"absolute\", top: \"20px\", left: \"20px\" , zIndex : 1000  }}>\n            <ControlGroup style={style}>\n              <InputGroup id=\"globe.traceroute.search\" placeholder=\"Enter url...\" />\n              <Button icon=\"arrow-right\" onClick={function(){do_search(setState)}}/>\n            \n            </ControlGroup>\n        <p style={{color : \"white\"}}> Currently displaying : {state.displaying}</p>\n        <div>\n        { state.thinking ? <Spinner/> : null }             \n        </div> \n        </div>\n        );\n      }\n\n  return (\n    <div style={{position :\"relative\", zIndex : 0 }}>\n      <SearchWidget />\n      <Globe\n        globeImageUrl=\"//unpkg.com/three-globe/example/img/earth-night.jpg\"\n        arcsData={data}\n        arcColor={\"color\"}\n        arcStroke={\"2px\"}\n        arcDashLength={() => 0.3}\n        arcDashGap={() => 0.05}\n        arcDashAnimateTime={() => 8000}\n      />\n    </div>\n  );\n}\n","import React from \"react\";\nimport \"@blueprintjs/core/lib/css/blueprint.css\";\nimport \"@blueprintjs/icons/lib/css/blueprint-icons.css\";\n\n\n/* \n    Here we import the UIS , or define them too :) \n*/ \n\n\nimport CmdsContainer from \"./CmdsContainer.js\" \nimport {Inspector} from \"./Inspector.js\" \nimport {TerminalWidget}  from \"./TerminalWidget2.js\"\nimport {Globe} from \"./Globe.js\" \nimport { SSInspector } from \"./SocksyncInspector.js\";\nimport {Iframe } from \"./IframeWidget\" \nimport {MapGl} from \"./MapGl\"\nimport {GlobeGl} from \"./GlobeGl\"\n\nexport var widget_dictionary = { \n    \"command_stack\" : {\n        element :  <CmdsContainer /> ,   \n        title  : \"Command Stack\" \n    } , \n    \"inspector\"   : { \n        element : <Inspector />   , \n        title : \"Inspector\"\n    }, \n    \"log\" : { \n        element : <h1> Pending implementation</h1>  , \n        title: \"Log Widget\"\n    }, \n    \"display\" : { \n        element : <h1> Pending implementation</h1>  , \n        title: \"Display Widget\"\n    }, \n\n    \"terminal\" : { \n        element : <TerminalWidget /> , \n        title: \"Console Interface\" \n    } , \n    \n    \"globe\" : { \n\telement : <Globe /> , \n\ttitle: \"Earth\" , \n    } , \n\n    \"ss_inspector\":{  \n        element : <SSInspector/> , \n        title : \"Socksync Inspector\" \n    } ,   \n\n    \"iframe\" : { \n        element : <Iframe/> , \n        title : \"Iframe\" \n    } , \n\n    \"map_gl\" : { \n        element : <MapGl/> , \n        title :\"MapGl\" \n    }, \n\n    \"globe.gl\" : { \n        element : <GlobeGl/>, \n        title : \"GlobeGl\"\n    }\n\n\n\n    \n\n\n\n}\n\n\n","import React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport \"@blueprintjs/core/lib/css/blueprint.css\";\nimport \"@blueprintjs/icons/lib/css/blueprint-icons.css\";\n\nimport { ObjectInspector, TableInspector } from \"react-inspector\";\n\nexport function Inspector(props) {\n  var ports = useSelector(state => state.inspection_ports);\n  var inspection_candidates = Object.keys(ports);\n\n  //the UI should render a list of possible things to inspect\n  return (\n    <ul>\n      {inspection_candidates.map(function(x) {\n        return (\n          <li key={performance.now()}>\n            <div>  \n                <span>{x}</span>\n            <ObjectInspector data={ports[x]} />\n            </div>\n          </li>\n        );\n      })}\n    </ul>\n  );\n}\n","import React from 'react';\nimport Terminal from 'terminal-in-react';\n\nimport ReactGlobe from 'react-globe' ; \n\nexport function Globe() { \n\n    return (\n        <ReactGlobe /> \n      );\n}\n","import React, {useState}  from 'react' \nimport IFrame  from 'react-iframe' \n\n\nimport * as util from \"../js/vcs_client/utils.js\" \n\nexport function Iframe() { \n\n    return ( \n        <IFrame //url=\"http://localhost:5050?target=http://coindesk.com\"\n            url=\"http://google.com\" \n        width=\"100%\"\n        height=\"100%\"\n        display=\"initial\"\n        position=\"relative\"/>\n   )\n        \n}","import React, { useState } from 'react';\nimport ReactMapGL from 'react-map-gl';\n\nexport function MapGl() {\n  const [viewport, setViewport] = useState({\n    width: \"100%\",\n    height: \"100%\",\n    latitude: 37.7577,\n    longitude: -122.4376,\n    zoom: 8\n  });\n\n  window.vcs_setViewport = setViewport\n  window.vcs_viewPort = viewport\n\n  window.vcs_set_viewport = function(vp) { \n\n    let new_vp = Object.assign(viewport,vp)\n    console.log(\"Setting: \")\n    console.log(new_vp)\n    setViewport(new_vp) \n    \n  }\n\n  return (\n    <ReactMapGL\n      {...viewport}\n      onViewportChange={setViewport}\n      mapboxApiAccessToken={\"pk.eyJ1Ijoic2F0dHN5cyIsImEiOiJjazd5YzBicjMwNWNkM2ZvN3BxaWViNDF6In0.oB6zUrblPfbayrW9DKphhA\"} \n    />\n  );\n}","\n//DEFINES THE WIDGETS THAT CAN BE SELECTED  \nimport React from \"react\";\nimport { Classes, Icon, Intent, ITreeNode, Position, Tooltip, Tree } from \"@blueprintjs/core\";\n\nimport \"@blueprintjs/core/lib/css/blueprint.css\";\nimport \"@blueprintjs/icons/lib/css/blueprint-icons.css\";\n\nimport {widget_dictionary}  from \"./WidgetDictionary.js\"\n\n\n\nvar widgets_info = { \n\n    \"commands\" :  { \n        tooltip : \"Interfaces for Command Inspection\" , \n        text     : \"Command Visualization\" , \n        children : [ \n            {id : \"command_stack\" } ,\n        ]\n    }  , \n    \"user_interaction\" : {\n        tooltip : \"Various tools for user interaction\" , \n        text : \"User Interaction\" , \n        children : [ \n           {id : \"terminal\" }, \n           {id : \"iframe\"}\n        ]\n    },\n    \"debugging\" : { \n        tooltip : \"Tools for debugging\" , \n        text : \"Debugger UI Tools\"  , \n        children :[ \n            {id :\"inspector\" } , \n            {id : \"log\"} , \n            {id  : \"ss_inspector\"}  ,  \n        ]\n\n    }, \n    \"exploratory\" : { \n        tooltip : \"Exploratory Widgets\" , \n        text : \"Exploratory\"  , \n        children :[ \n            {id :\"globe\" } , \n            {id : \"map_gl\"}  , \n            {id : \"globe.gl\"} \n        ]\n\n    }    \n\n}\n\nvar curr_id = 0 \nfunction gen_id(){ \n    return \"id_\" + (curr_id ++ ) \n}\n\nfunction build_widgets(widgets_info) { \n    var folder_keys = Object.keys(widgets_info) \n    var to_return = [] \n\n    folder_keys.map(function(k) {\n\n        var info = widgets_info[k] \n        var obj = { \n            id : gen_id()  , \n            hasCaret : true, \n            isExpanded : true, \n            icon : \"folder-close\" , \n            label : (\n                <Tooltip content={info.tooltip} position={Position.RIGHT}>\n                    {info.text} \n                </Tooltip>\n            ), \n            childNodes : info.children.map( function(c) { \n                return { \n                    id : gen_id() , \n                    icon : \"cube-add\" , \n                    label : widget_dictionary[c.id].title , \n                    widget_id : c.id , \n                }\n            }\n                \n            ) , \n        }\n\n        to_return.push(obj) \n        \n    })\n\n    return to_return \n}\n\nexport var WIDGETS = build_widgets(widgets_info) \n\n\n\n\n/* \nFOR REFERENCE:  (from documentation)\n*/\n\n\n/* tslint:disable:object-literal-sort-keys so childNodes can come last */\nconst INITIAL_STATE  = [\n    {\n        id: 0,\n        hasCaret: true,\n        icon: \"folder-close\",\n        label: \"Folder 0\",\n    },\n    {\n        id: 1,\n        icon: \"folder-close\",\n        isExpanded: true,\n        label: (\n            <Tooltip content=\"I'm a folder <3\" position={Position.RIGHT}>\n                Folder 1\n            </Tooltip>\n        ),\n        childNodes: [\n            {\n                id: 2,\n                icon: \"document\",\n                label: \"Item 0\",\n                secondaryLabel: (\n                    <Tooltip content=\"An eye!\">\n                        <Icon icon=\"eye-open\" />\n                    </Tooltip>\n                ),\n            },\n            {\n                id: 3,\n                icon: <Icon icon=\"tag\" intent={Intent.PRIMARY} className={Classes.TREE_NODE_ICON} />,\n                label: \"Organic meditation gluten-free, sriracha VHS drinking vinegar beard man.\",\n            },\n            {\n                id: 4,\n                hasCaret: true,\n                icon: \"folder-close\",\n                label: (\n                    <Tooltip content=\"foo\" position={Position.RIGHT}>\n                        Folder 2\n                    </Tooltip>\n                ),\n                childNodes: [\n                    { id: 5, label: \"No-Icon Item\" },\n                    { id: 6, icon: \"tag\", label: \"Item 1\" },\n                    {\n                        id: 7,\n                        hasCaret: true,\n                        icon: \"folder-close\",\n                        label: \"Folder 3\",\n                        childNodes: [\n                            { id: 8, icon: \"document\", label: \"Item 0\" },\n                            { id: 9, icon: \"tag\", label: \"Item 1\" },\n                        ],\n                    },\n                ],\n            },\n        ],\n    },\n    {\n        id: 2,\n        hasCaret: true,\n        icon: \"folder-close\",\n        label: \"Super secret files\",\n        disabled: true,\n    },\n];\n","import React from \"react\";\n\nimport { Classes, Icon, Intent, ITreeNode, Position, Tooltip, Tree } from \"@blueprintjs/core\";\n\n\nimport {WIDGETS} from \"./WidgetSelectorManifest.js\"\nimport {widget_dictionary} from \"./WidgetDictionary.js\"  \n\nexport class WidgetSelector extends React.Component {\n     \n     state  = { nodes: WIDGETS };\n\n     render() {\n        return (\n                <Tree\n                    contents={this.state.nodes}\n                    onNodeClick={this.handleNodeClick}\n                    onNodeCollapse={this.handleNodeCollapse}\n                    onNodeExpand={this.handleNodeExpand}\n                    className={Classes.ELEVATION_2}\n                />\n        );\n    }\n\n    handleNodeClick = (nodeData, _nodePath , e ) => {\n        const originallySelected = nodeData.isSelected;\n        if (!e.shiftKey) {\n            this.forEachNode(this.state.nodes, n => (n.isSelected = false));\n        }\n        nodeData.isSelected = originallySelected == null ? true : !originallySelected;\n        this.setState(this.state); \n\n        let windowId = this.props.windowId \n\n        console.log(\"GOT CLICK from window id: \" + windowId ) \n        var {widget_id, label } = nodeData ; //this gets the id of the element to render  \n\n        var widget = widget_dictionary[widget_id].element //gets the actual element \n        var widget_title = widget_dictionary[widget_id].title \n        //need to actually look up the \n        console.log(nodeData)\n        window.vcs.store.dispatch({type:\"ADD_WIDGET\" , payload : {\n            id : windowId,  \n            title : widget_title , // label ,  (modified - bug check ? )\n            element  : widget , \n         }})\n        \n         /* \n            OK cool, so the window should update now. \n            Notice that the window gets originally created it has a random unique windowID \n            which it generates. The initial subscription will yield null so it by default renders \n            the WidgetSelector (and passed the windowID prop to the widgetSelector) \n\n            When a selection is made this prop is accessed and the above dispatch will fill \n            the appropiate information in the store so that the window will re render \n            (assuming that everything works as intended of course ;)  \n         */\n    };\n\n    handleNodeCollapse = (nodeData ) => {\n        nodeData.isExpanded = false;\n        this.setState(this.state);\n    };\n\n    handleNodeExpand = (nodeData ) => {\n        nodeData.isExpanded = true;\n        this.setState(this.state);\n    };\n\n    forEachNode(nodes , callback ) {\n        if (nodes == null) {\n            return;\n        }\n\n        for (const node of nodes) {\n            callback(node);\n            this.forEachNode(node.childNodes, callback);\n        }\n    }\n}\n","import React, {useState} from \"react\";\nimport {useSelector,useDispatch} from \"react-redux\" ; \nimport { Mosaic, MosaicWindow } from \"react-mosaic-component\";\nimport \"@blueprintjs/core/lib/css/blueprint.css\";\nimport \"@blueprintjs/icons/lib/css/blueprint-icons.css\";\n\nimport \"./mosaic.css\";\n\nimport { WidgetSelector } from \"./WidgetSelector.js\"; \nimport {widget_dictionary} from \"./WidgetDictionary.js\"  ; \n\nfunction get_new_node_id() { \n    var id = \"mosaic_node_\" + new Date().getTime();\n    console.log(id)\n    return id\n}\n\n/* \n This architecture was interesting to figure out :)  \n The key was to wrap the MosiacWindows so they each subscribe to \n Their own own, and to have a default case when the ID is not \n defined (which enables create new nodes without pre updating the store) \n\n Also, another solution was to move the selector from the root of \n the mosaic window component into the leaves so that the whole thing \n is not re-rendered whenever ELEMENT_MAP or TITLE_MAP change \n*/ \n\nexport function MosaicWindowWrapper(props) { \n\n    var element = useSelector(state=>state.ELEMENT_MAP[props.id]) \n    var title = useSelector(state=>state.TITLE_MAP[props.id])     \n\n\n    if (! element) { \n\n        //case 1 : it is in widget_dictionary \n        if (widget_dictionary[props.id] ) { \n          element = widget_dictionary[props.id].element\n          title   = widget_dictionary[props.id].title \n          \n        } else { \n\n          //case 2: default case  \n          element = <WidgetSelector windowId={props.id} /> \n          title = \"Select UI\" \n        }\n\n    }\n                \n    return ( \n  <MosaicWindow\n    path={props.path}\n    createNode={get_new_node_id}\n    title={title}\n  >\n    {element}\n  </MosaicWindow> \n    )\n\n}","import React, {useState} from \"react\";\nimport {useSelector,useDispatch} from \"react-redux\" ; \nimport { Mosaic, MosaicWindow } from \"react-mosaic-component\";\nimport \"@blueprintjs/core/lib/css/blueprint.css\";\nimport \"@blueprintjs/icons/lib/css/blueprint-icons.css\";\nimport { Classes, HTMLSelect } from '@blueprintjs/core';\n\n\nimport \"./mosaic.css\";\n\nimport { WidgetSelector } from \"./WidgetSelector.js\";\nimport {MosaicWindowWrapper} from \"./MosaicWindowWrapper.js\"\n\n/* \nexport var ELEMENT_MAP = {\n  a: <div>Left Window</div>,\n  b: <div>Top Right Window</div>,\n  c: <div>Bottom Right Window</div>,\n  new: <WidgetSelector />\n};\n\nexport var TITLE_MAP = {\n  a: \"Left Window\",\n  b: \"Top Right Window\",\n  c: \"Bottom Right Window\",\n  new: \"New Window\"\n}; \n\n\n\nexport var get_dispatch = function(id,title) {\n  \n    //create element \n  var element =  <WidgetSelector />;\n\n    //dispatch widget info to  redux store \n  var payload = { \n      id, \n      element, \n      title, \n  }\n\n  return {type: \"ADD_WIDGET\", payload } \n};\n\n\n\n*/ \n\nconst specs = {\n  \"a\" : {\n    direction: \"row\",\n    first: \"command_stack\",\n    second: {\n  direction : \"column\", \n      first: \"iframe\",\n      second: \"ss_inspector\" \n    }\n  }, \n  \"b\" : {\n    direction: \"row\",\n    first: \"command_stack\",\n    second: \"ss_inspector\" , \n\n  } , \n  \"c\" : {\n    direction: \"row\",\n    first: \"map_gl\",\n    second: \"ss_inspector\" , \n\n  } , \n  \"d\" : \"globe.gl\" , \n  \n}\n\nfunction Windows() {\n\n  return (\n\n    <div id=\"mosaic\">\n      <Mosaic\n        //className=\"mosaic-blueprint-theme bp3-dark\"\n        renderTile={function(id, path) {\n            return <MosaicWindowWrapper id={id} path={path} /> \n        }}\n        initialValue={specs.d}\n      />\n    </div>\n  );\n}\n\n\n//export default MyMosaic;\nexport default Windows;\n","import { Position, Toaster } from \"@blueprintjs/core\";\n \n/** Singleton toaster instance. Create separate instances for different options. */\nexport const AppToaster = Toaster.create({\n    className: \"recipe-toaster\",\n    position: Position.TOP,\n});","//Sun Feb 23 10:38:06 PST 2020 \n\nvar log = console.log \n\nexport var subscriptions  = { \n    //empty at the beginning \n}\n\nexport function subscribe( { id , cb }) {\n    let fns = subscriptions[id]  \n    if (!fns ) { \n        //unit \n        subscriptions[id] = [cb]\n    } else { \n        subscriptions[id].push(cb) \n    }\n}\n\nexport function publish( { id, data }) { \n    //log(id,data)\n    let fns = subscriptions[id] \n    if ( !fns ) { \n        //nothing to do really\n    } else { \n        fns.forEach(f => f({data}) ) //call each one \n    }\n}\n\n\nexport var functions = { \n    //empty at first \n}\n\nexport function provide( {id, func}) { \n    let fn = functions[id] \n    if (!fn ) { \n        functions[id] = func\n    } else { \n        log(\"Warning: overwriting function\") \n        functions[id] = func \n    }\n}\n\n\n// not sure if call works ? \nexport function call( {id,args }) { \n    let fn = functions[id] \n    if (!fn ) { \n        log(\"No registered function\") \n        return null \n    } else { \n        log(\"calling: \" , id)\n        return fn(args) \n    }\n}","import React, { useState } from 'react';\nimport {subscribe} from \"../js/vcs_hub\"\n\nimport {\n    ProgressBar, \n} from \"@blueprintjs/core\"; \n\nexport function AudioProgress() {  \n\n    /* \n        Will get the audio RMS from the vcs HUB \n    */\n\n   const [level, setLevel] = useState(0); \n\n    let on_update = function({data}) { \n        setLevel(data*10)\n    }\n\n    subscribe({id : \"audio.rms\" , cb : on_update})\n\n    return ( \n\n        <ProgressBar className=\"bp3-intent-primary\" value={level}> </ProgressBar> \n    )\n\n}\n\n","\nimport * as React from \"react\";\n\nimport {\n    Alignment,\n    Button,\n    Classes,\n    H5,\n    Navbar,\n    NavbarDivider,\n    NavbarGroup,\n    NavbarHeading,\n    Switch,\n    ProgressBar, \n\n} from \"@blueprintjs/core\"; \n\nimport {AudioProgress} from \"./AudioProgress\"\nimport {call} from \"../js/vcs_hub\" \n\nvar icons = [ \"power\" , \"headset\" , \"vertical-bar-chart-asc\" ] \n\nexport function NavBar() { \n\n    var audio_on = false  \n    let toggle_audio = function() { \n        var id = null  \n        var ui_msg = null \n        if (audio_on) { \n            id = \"speech.stop\"\n            ui_msg = \"Stopped Listening\"\n        } else { \n            id = \"speech.init\"\n            ui_msg = \"Started Listening\"            \n        }\n\n        call({id, args : null}) \n        call({id : \"ui.toast\" , args : {message : ui_msg }})\n\n        //dont forget to toggle ! \n        audio_on = !audio_on                \n    }\n\nreturn (\n    <Navbar className={Classes.DARK}>\n                    <NavbarGroup align={Alignment.LEFT} >  \n                        <NavbarHeading>VCS</NavbarHeading>\n                        <NavbarDivider />\n                        <Button\n                         className={Classes.MINIMAL} \n                         onClick={function() { \n                            toggle_audio() \n                         }}\n                         icon={icons[1]} \n                         text=\" \" />\n                        \n                    </NavbarGroup>\n\n                    <NavbarGroup align={Alignment.CENTER}  > \n                    <AudioProgress/>\n                    </NavbarGroup>\n\n                    \n\n                </Navbar>\n);\n} \n\n","import React from \"react\";\nimport Home from \"./components/Home.js\";\nimport CmdsContainer from \"./components/CmdsContainer.js\";\nimport ChatBox from \"./components/ChatBox.js\";\nimport Mosaic from \"./components/mosaic_integration.js\";\n\nimport {AppToaster} from \"./components/Toaster.js\" \nimport {NavBar} from \"./components/NavBar\" \n\n\nimport \"./App.css\" ; \n\nimport {provide} from  \"./js/vcs_hub\"\n\nimport * as mosaic from \"./components/mosaic_integration.js\" \n\nif (! window.vcs ) { \n  window.vcs = {mosaic} \n} else { \n  Object.assign(window.vcs, {mosaic} ) \n}\n\n\n/* \nSET UP SOME GLOBAL STATE \n*/\n \n\nclass App extends React.PureComponent {\n\n  render() {\n\n    //will export the TOAST functionality \n    provide({id  : \"ui.toast\" , func : (function(args){\n\n      this.showToast(args) \n\n    }).bind(this) })\n\n    return (\n      <div className=\"App\"> \n        <NavBar/> \n        <Mosaic/>                 \n      </div>\n    );\n  }\n\n  showToast = ({message}) => {\n      AppToaster.show({ message });\n  }\n\n}\n\n\nfunction oldCore() {\n  return (\n    <div>\n      <CmdsContainer />\n      <ChatBox />\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","// src/js/reducers/index.js\n\nimport produce from \"immer\";\nimport React from \"react\";\n\n//import {WidgetSelector} from \"../../components/WidgetSelector.js\"\nimport {widget_dictionary} from \"../../components/WidgetDictionary.js\"\n\nexport var ELEMENT_MAP = {\n\n  };\n  \n  export var TITLE_MAP = {\n                  \n  };\n\n\nexport const initialState = {\n  message: \"Development Version 2020\",\n  num: 20,\n  active_ids: [], //the currently active UI IDS\n  subscriptions: {}, //for ui\n  subscription_data: {} ,//holds objects, \n  inspection_ports  : { \n\t  \"x1\"  : { a : [1,2,3,4,4] , b : { d : 20}} , \n\t  \"x2\"  : { x : [1,2,3,4, {hello: 30 }] , b : { d : 20}} , \t   \n  }, \n  ELEMENT_MAP , \n  TITLE_MAP ,\n};\n\nvar log = x => console.log(\"[store]:: \" + x);\n\nexport const rootReducer = produce((state, action) => {\n  switch (action.type) {\n    case \"SET_MSG\":\n      state.message = action.payload;\n      return state;\n\n    case \"ADD_ACTIVE_ID\":\n      state.active_ids.push(action.payload.id);\n      log(\"Added active id: \" + action.payload.id);\n      return state;\n\n    case \"ADD_SYNC_INFO\":\n      state.subscription_data[action.payload.id] = {\n        client: action.payload.client\n      };\n      log(\"Added sync info for id: \" + action.payload.id);\n      return state;\n\n    case \"UPDATE_SUBSCRIPTION\":\n      log(\"Updating subscription for: \" + action.payload.id);\n      console.log(action);\n      state.subscriptions[action.payload.id] = action.payload.data;\n      state.message =\n        \"Updated subscription for: \" +\n        action.payload.id +\n        \" @\" +\n        new Date().toString();\n      return state;\n\n    case \"REMOVE_ACTIVE_ID\":\n      state.active_ids = state.active_ids.filter(id => id != action.payload.id);\n      log(\"Removed active id: \" + action.payload);\n      return state;\n\n    case \"REMOVE_SUBSCRIPTION\":\n      //get the client ref and close it\n      var client = state.subscription_data[action.payload.id].client;\n\n      //it is very possible that the websocket client has not even connected yet,\n      //as was happening with minimal commands.\n\n      //So...\n\n      //close\n\n      client.ws.close();\n      log(\"Closed websocket connection for id: \" + action.payload.id);\n      //now delete the info\n      delete state.subscription_data[action.payload.id];\n      delete state.subscriptions[action.payload.id];\n      //and return the state\n\t  return state;\n\t  \n\tcase \"ADD_WIDGET\" : \n\t  log(\"Received request to ADD WIDGET\") \n\t  log(action) \n\t  var { id, element, title } = action.payload  \n\t  //update the state object \n\t  state.ELEMENT_MAP[id] = element\n\t  state.TITLE_MAP[id]   = title \n\t  return state \n\n\n    default:\n      log(\"Hit default case in root reducer with action -> \");\n      log(action);\n      return state;\n  }\n});\n","// src/js/store/index.js\nimport { createStore } from \"redux\";\nimport {initialState, rootReducer} from \"../reducers/index\";\nconst store = createStore(rootReducer, initialState, window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__() );\nexport default store;\n","\nimport {Client} from './socksync_web_client.js' \n\n\n/* \n   GLUE between vcs and socksync API \n */\n\n\nvar port = 9004\nvar log = function(x) {window.vcs_ui.log(x)}\n\n\n\nexport function start_sync(id) { \n    log(\"Initializing sync for: \" + id)\n\n    let on_update = function(data){ \n\tlog(\"Got update for id: \" + id ) \n\t//update the subscription \n\twindow.Dispatch( {type : \"UPDATE_SUBSCRIPTION\" , \n\t\t\t  payload : { id : id , \n\t\t\t\t      data : data } } )\n    }\n    \n    // pass the connection and the id of the data you want to synchronize\n    let subscribe_id = id \n    var client = new Client({port, subscribe_id , on_update})\n\n    log(\"Link setup has been initiated...\") \n    \n    /* \n       we can go ahead and initialize (empty) the state \n       However, there is something to keep in mind \n       If the vcs command has not explicitly initialized its state, then \n       the client above will NOT actually receive a state update \n       (it only receives one when an explicit update is sent). \n       However, the UI detects if the data field below is present in order \n       To render the UI, else it just says \"AWAITING STATE\". Thus I pre-emptively send \n       a message now to force the rendering of the default UI \n    */\n\n    /*\n    window.Dispatch( {type : \"UPDATE_SUBSCRIPTION\" , \n\t\t      payload : { id : id , \n\t\t\t\t  data : {}  }} ) \n\t\t\t\t  \n\t\t\t\t  */\n    \n    return  { client } \n    \n}\n","/* \n    UI interface to vcs \n    FIRST PASS \n    Sat Jun 29 22:08:22 PDT 2019\n    adapted from vue to react on Tue Dec 17 17:13:28 EST 2019\n\n*/ \n\n//import {start_sync} from './diffsyncer.js'\nimport {start_sync} from './socksyncer.js' \n//import './socksync.js' \nimport cmd_manifest from './command_manifest.js' \n\nif (! window.vcs_ui ) { \n    window.vcs_ui = {} \n}\n\nvar log = function(msg) {\n    console.log(\"[vcs_ui] \\t\\t ~ \" + msg);\n  };\n\nfunction init() { \n    log(\"Initializing\")\n    window.vcs_ui.log = log \n}\n\ninit() \n\n\n/* eslint-disable */\n\n/* \n  Connect to the vcs ui WS endpoint \n  */\n// eslint-disable-next-line\nvar vcs_ui_connection = new WebSocket(\"ws://localhost:9003\");\nvcs_ui_connection.onopen = function() {\n  log(\"Connected to vcs UI port\");\n};\n\nvcs_ui_connection.onmessage = function(event) {\n  var msg = JSON.parse(event.data);\n  switch (msg.type) {\n    case \"command_initialization\":\n      var id = msg.id;\n      log(\"Received command initialization for: \" + id);\n      \n      window.Dispatch({type : \"ADD_ACTIVE_ID\" , payload : {id} })\n      \n      //init the sync a\n      var {client}  = start_sync(id)   //returns the sync client  \n      window.Dispatch({type : \"ADD_SYNC_INFO\" , payload : {  client,  id } }) \n      \n\t  \n      break;\n      \n  case \"command_finish\":\n      var id = msg.id;\n      log(\"Received command finish for: \" + id);\n      \n      window.Dispatch({type : \"REMOVE_ACTIVE_ID\" , payload : {id} })\n      window.Dispatch({type : \"REMOVE_SUBSCRIPTION\" , payload : {id} })      \n      break;      \n      \n      \n      \n    default:\n      log(\"Unrecognized message type:\" + msg.type);\n  }\n};\n\n","//Sun Mar  3 11:36:55 PST 2019\n\nexport var audio_primitives = { \n\tcontext : null, \n\tsource : null, \n\tprocessor : null , \n\tstream  : null , \n\n}\n\nvar handleSuccess = function(f) { //f is the audio buffer handler\n    return function(stream) {\n\n\taudio_primitives.stream = stream \n\n\taudio_primitives.context = new AudioContext();\n\taudio_primitives.source = audio_primitives.context.createMediaStreamSource(stream);\n\taudio_primitives.processor = audio_primitives.context.createScriptProcessor(1024, 1, 1);\n\n\taudio_primitives.source.connect(audio_primitives.processor);\n\taudio_primitives.processor.connect(audio_primitives.context.destination);\n\n\taudio_primitives.processor.onaudioprocess = function(e) {\n\t\tf(e.inputBuffer.getChannelData(0))\n\t\t//look at audio_detector.js to find buffer processing \n\t};\n\n    };\n}\n\nexport function connect(f) {  //f is the audio buffer handler \n    navigator.mediaDevices.getUserMedia({ audio: true, video: false })\n\t.then(handleSuccess(f));\n}\n\nexport function disconnect() { \n\n\tlet ctx = audio_primitives.context \n\n\tif (ctx) { \n\t\tctx.close() \n\t} \n\n\taudio_primitives = { \n\t\tcontext : null, \n\t\tsource : null, \n\t\tprocessor : null , \n\t\tstream  : null , \n\t\n\t}\n\t\t\n}\n\n\n","//Sun Mar  3 16:01:13 PST 2019\nimport * as util from \"./utils.js\" \nimport * as speech from \"./speech2.js\"\n\nvar log = util.get_logger(\"tts\") \n\nexport var tts = window.speechSynthesis;\nexport var speech_que = []\n\nexport function is_speaking() { \n    return tts.speaking\n}\n\nexport async function finished_speaking() {\n    let timeout = await util.loop_until_true(()=>!tts.speaking,200,1000*60)\n    return timeout \n}\n\nexport async function speak(text) { \n    log.i(\"Request to speak  =:> \" + text) \n    if (! tts.speaking) { \n\tspeech.stop_recognition()\n\tvar utterance  = new SpeechSynthesisUtterance(text);\n\tutterance.voice = tts.getVoices()[49] \n\t//utterance.pitch = pitch.value;\n\tutterance.rate = 1.2;\n\ttts.speak(utterance); \n\tlet _ = await finished_speaking() \n\tlet next = speech_que.shift() \n\tif (next) { speak(next) } else { \n\t    speech.start_recognition()\n\t}\n    } else { \n\tlog.i(\"Scheduling speech for later.\")\n\tspeech_que.push(text)\n    }\n}\n\n\n","/*\n modifying to use the bundled text client \n Sat Feb 29 11:41:33 PST 2020\n*/\n\nimport * as ad from \"./audio_detector.js\" \nimport {get_logger} from \"./utils.js\" \nimport * as tts from \"./tts.js\" \n\n//grab the text client module from compiled typescript folder \nimport * as vcs_tc from \"../../ts/dist/vcs_text_client\"  \n\nvar sounds = window.sounds.core.sounds  //cljs compiled and added to page \n\nvar log = get_logger(\"speech\") \n\n/* params && vars */ \nlet port = 9001 \nlet host = \"localhost\"  \nexport var tc   = null  //handle to text client object \n\nexport function connect_ws() { \n    log.i(\"Connecting ws..\")\n    tc =  new vcs_tc.VCS_TEXT_CLIENT({port,host,on_msg,id:\"spch\"})  //see below \n    tc.connect()  \n} \n\nexport function close_ws() { \n    log.i(\"Closing ws\") \n    if (tc) { tc.close() } \n}\n\nexport var send_text = function(text) { \n    if (tc) {tc.send({text,type:\"vcs_text\"})}  else { \n        throw(Error(\"Not connected\")) \n     }  \n}\n\nexport var vcs_params = {} // will get set by a  ws message \n\n\n\n/* \nIMPLEMENTATION DETAILS BELOW --> \n*/ \n\n//feedback handler \nfunction handle_feedback({payload}) { \n    switch (payload) {\n    case 'success' :\n\tsounds.success() \n\tbreak \n    case 'continue' : \n\tsounds.continue() \n\tbreak \n    case 'unrecognized' : \n\tsounds.unrecognized() \n\tbreak \n    case 'error' : \n\tsounds.error() \n\tbreak\n    case 'ready-for-input' :\n\tsounds['ready-for-input']()\n\tbreak\n    case 'shutdown' : \n    window.location = \"https://github.com/sheunaluko/vcs\"  \n    break \n    default : \n\tlog.i(\"Unrecognized feedback text\") \n    }\n}\n\n// message output handler \nfunction handle_text({payload}) { \n    log.i(\"handling text: \" + payload) \n\ttts.speak(payload) \n}\n\n//define message handler   \nlet response_dict = { \n    \"text\"  : handle_text , \n    \"feedback\" :  handle_feedback , \n    \"unrecognized_input\" : ()=>sounds.unrecognized()  , \n    \"params\" : function(params) { \n        log.i(\"Received params\") \n        vcs_params = params\n        log.i(\"Params updated\") \n    } , \n    \"command_result\" : function({payload,id}) { \n        log.d(\"Got command result:\")\n        log.d(payload) \n        //check the result  \n        if(payload.quiet) { \n            log.i(\"Command suppressed output\") \n        } else { \n        sounds.success()                 \n        }\n    } , \n}\n\nfunction on_msg(msg) {   \n    // msg = { type : string , data : string | number | bool | obj }  \n\tlog.d(\"Got ws msg:\") ;\n    log.d(msg) \n\n    let handler = response_dict[msg.type]  \n    if (! handler ) { \n        tts.speak(\"Received unrecognized message type \" + msg.type + \" from vcs server\")\n    } else { \n        handler(msg)       \n    }\n} \n    \n    \n\n\n\n/* Create recognition object */ \nvar recognition = new window.webkitSpeechRecognition();\nrecognition.continuous = true\nrecognition.interimResults = false\nrecognition.onstart = function() {\n    log.i(\"Recognition starting\") \n}\n    \nrecognition.onsoundstart = function() {\n    //log.d(\"Sound started.\")\n}\n\nrecognition.onresult = function(event) { \n    log.d(event) \n    let text = event.results[event.resultIndex][0].transcript\n    log.d(\"Got recognition result: \" + text)     \n    send_text(text) \n}\nrecognition.onerror = function(event) { \n    log.d(\"Recognition error:\")\n    log.d(event) \n}\nrecognition.onend = function() {  \n    log.i(\"Recognition ended\")\n    is_started = false \n} \n\nvar is_started = false \nexport function start_recognition() {\n    if (!is_started) {\n\tlog.d(\"Starting recognition.\") \n\trecognition.start() \n\tis_started = true \n    } \n}\n\nexport function stop_recognition() { \n    recognition.abort()    \n    is_started = false \n}\n\n\nexport function trigger_text(t) {\n    send_text(t) \n}\n\n\n\n/* trigger recognition when audio is detected */ \nexport function start_audio_trigger() { \n\tad.start(start_recognition) \n\t\n\t//when audio is detected then recognition is started  \n}\n\nexport function stop_audio_trigger() { \n\tad.stop() \n}\n\n\n\n","import * as mic from \"./mic.js\" \nimport * as util from \"./utils.js\" \nimport * as tts from \"./tts.js\"\nimport {publish} from \"../vcs_hub.js\" //used for global comms \n\n// params \nlet event_thresh = 5 //this is a RATIO of current/last buffer RMS  \n\n// -  \nexport function start(cb) { \n    var last_rms = 0.001 \n    let f = function(buf) { \n\t\tlet rms = util.rms(buf) \n\t\tif ( last_rms != 0 && ( rms  / last_rms ) > event_thresh && !tts.is_speaking() ) { \n\t\t\tcb() \n\t\t}\n\t\tlast_rms = rms \n\n\t\t//so the above will handle triggering the audio detection \n\t\t//callback (which is recognition.start) \n\n\t\t//however, in addition to this I want to get a handle \n\t\t//to the RMS value so I can render it in the UI \n\n\t\tpublish({ id : \"audio.rms\"  , data : rms}) \n\t} \n\tmic.connect(f) \n\t\n}\n\n\nexport function stop() { \n\t//have to do a simple thing -- \n\tmic.disconnect() \n\tpublish({ id : \"audio.rms\"  , data : 0}) \n\n}\n\n","import * as speech from \"./speech2.js\" \nimport * as tts from \"./tts.js\" \nimport {provide} from \"../vcs_hub\"\nimport * as mic from \"./mic\"\nimport * as util from \"./utils.js\" \n\n//import the hyperloop client \nimport {Client} from \"../../external/hyperloop_web_client.js\" \n\n\n\nasync function hyperloop_connect(port = 9011, host=\"localhost\", id=\"sattsys.vcs_client\") { \n    var hyperloop = new Client({port, host, id} )\n    window.vcs.hyperloop = hyperloop \n    await hyperloop.connect()  \n\n    window.vcs.hyperloop_call = async function(args,log=false) { \n        let result =  await window.vcs.hyperloop.call(args) \n        if (log) {console.log(result) }  \n        window.vcs.hyperloop.last_result = result\n        return result\n    }\n}\n\n\n\n\n\n\nspeech.connect_ws() \n\nfunction init_speech() { \n    speech.start_recognition() \n    speech.start_audio_trigger() \n}\n\nfunction stop_speech() { \n    //speech.close_ws() \n    speech.stop_recognition() \n    speech.stop_audio_trigger() \n}\n\nfunction send_text(t) {\n    speech.trigger_text(t) \n}\n\n//provide the init_speech function \nprovide({id :\"speech.init\" , func : function(args) { \n    init_speech() \n}})  \n\nprovide({id :\"speech.stop\" , func : function(args) { \n    stop_speech() \n}})  \n\n\n\nlet exports = {speech,tts, init_speech ,  send_text, mic, util,hyperloop_connect}  \n\nif (! window.vcs ) { \n    window.vcs = exports \n} else { \n    Object.assign(window.vcs,exports ) \n}\n","import store from \"./store/index\";\nimport vcs_ui from \"./vcs_ui.js\"\nimport vcs_client from \"./vcs_client/index.js\" \nimport command_manifest from \"./command_manifest.js\" \nimport * as hub from \"./vcs_hub\" \n\n//configure global env here\n//window.command_manifest = command_manifest \n\nvar globals = {hub,store,command_manifest} \n\nif ( ! window.vcs) { \n    window.vcs = globals\n} else { \n    Object.assign(window.vcs, globals) \n}\n\nwindow.globals = {subscriptions : {}  , \n\t\t  \n\t\t }\nwindow.Dispatch = store.dispatch \n\n/* configure global dispatch fns */ \nwindow.dispatch = {\n    'set_msg' : function(payload) { \n\tstore.dispatch({type: \"SET_MSG\" , payload })\n    } , \n\n}\n\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport * as dotenv from 'dotenv' \n\n\n\nimport \"./js/index\"\nimport store from \"./js/store/index\";\n\nimport { Provider } from \"react-redux\";\n\n//BLUEPRINT CSS \nimport 'normalize.css/normalize.css';\nimport \"@blueprintjs/core/lib/css/blueprint.css\";\n\n//MOSAIC CSS \nimport \"./react-mosaic-component.css\"\n\n\n//ENV CONFIG \ndotenv.config() \n\n//set up react for use with redux \nReactDOM.render(\n    <Provider store={store}>\n    <App />\n    </Provider>,\n    document.getElementById('root')\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}