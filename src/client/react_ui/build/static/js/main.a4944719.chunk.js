(this.webpackJsonpreact_ui=this.webpackJsonpreact_ui||[]).push([[0],{105:function(e,t,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,c=i.length;a<c;a++,o++)r[o]=i[a];return r};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){this.conn=void 0,this.ops=e}return e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.log.apply(null,r(["[vtc("+(this.ops.id||"")+")]::"],e))},e.prototype.connect=function(){try{var e="ws://"+this.ops.host+":"+this.ops.port;this.log("Attempting connection to url: "+e),this.conn=new WebSocket(e),this.conn.onopen=function(){this.log("Connection opened"),this.ops.on_open&&this.ops.on_open()}.bind(this),this.conn.onmessage=function(e){this.log("Got message");var t=JSON.parse(e.data);this.ops.on_msg(t)}.bind(this),this.conn.onclose=function(){this.log("WS Connection was closed for some reason"),this.ops.reconnect&&(this.log("Attempting reconnect"),this.connect())}.bind(this)}catch(t){this.log("Oops.. an error occured"),this.log("Here it is:"),this.log(t),this.ops.reconnect&&setTimeout(function(){this.connect()}.bind(this),this.ops.reconnect)}},e.prototype.send=function(e){this.conn?this.conn.send(JSON.stringify(e)):this.log("Not yet connected! Please connect first by running {obj}.connect()")},e.prototype.close=function(){this.conn&&this.conn.close()},e}();t.VCS_TEXT_CLIENT=o},106:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(29),o=n(41);var i={info:console.log,debug:console.log};function a(e){var t=function(t,n){var r="["+e+"] \t\t ~ ";"string"==typeof n?i[t](r+n):(i[t](r),i[t](JSON.stringify(n)))};return{i:function(e){t("info",e)},d:function(e){t("debug",e)}}}var c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(r.a)(this,e),!t.subscribe_id)throw"Please provide subscribe_id";if(!t.on_update)throw"Please provide on_update callback";this.log=a("csync_"+t.subscribe_id),this.subscribe_id=t.subscribe_id,this.socksync_port=t.port||9004,this.socksync_host=t.host||"localhost",this.connection_url="ws://".concat(this.socksync_host,":").concat(this.socksync_port),this.ws=null,this.state={},this.on_update=t.on_update,this.connect()}return Object(o.a)(e,[{key:"connect",value:function(){var e=this.connection_url;this.log.d("Attempting connection to url: "+e);var t=new WebSocket(e);this.ws=t,t.onopen=function(){this.log.d("Connection successful"),this.register()}.bind(this),t.onmessage=function e(t){this.log.d("Got message: "),this.log.d(t.data);var n=JSON.parse(t.data);switch(n.type){case"update":var r=n.data;this.log.d("Received data update: \n"+JSON.stringify(r)),this.log.d("Apply update to the state, which is currently: "),this.log.d(this.state),this.state=function e(t){var n=t.state,r=void 0===n?{}:n,o=t.data;return Object.keys(o).map((function(t){o[t].constructor==Object?r[t]=e({state:r[t],data:o[t]}):r[t]=o[t]})),r}({state:this.state,data:r}),this.log.d("Now this.state is: "),this.log.d(this.state),this.log.d("Calling on update callback now with this.state"),this.on_update(this.state),this.log.d("Done");break;default:this.log.d("Unrecognized message type:"),this.log.d(e)}}.bind(this),t.onclose=function(){this.log.d("The ws connection was closed")}.bind(this)}},{key:"send",value:function(e){if(!this.ws)throw"ws is undefined";this.ws.send(JSON.stringify(e))}},{key:"register",value:function(){var e={type:"register",subscribe_id:this.subscribe_id};this.send(e),this.log.d("Sent register message:\n"+JSON.stringify(e))}},{key:"update",value:function(e){var t={type:"update",data:e};this.send(t),this.log.d("Send update message:\n"+JSON.stringify(e))}}]),e}()},225:function(e,t,n){},239:function(e,t,n){"use strict";var r=n(237),o=n(238);Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(t){r(this,e),this.enabled=!0,this.id=t,this.header="[".concat(t,"]::")}return o(e,[{key:"l",value:function(){if(this.enabled){for(var e,t=this.header,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];for(;e=r.shift();)(e=e[0]).constructor==String?t+=" "+e:(console.log(t),console.log(JSON.stringify(e)),t=this.header);t!=this.header&&console.log(t)}}},{key:"i",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.l(t)}},{key:"d",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.l(t)}},{key:"disable",value:function(){this.enabled=!1}},{key:"enable",value:function(){this.enabled=!0}}]),e}();t.Logger=i,t.make_logger=function(e){return new i(e)}},253:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SSInspector}));var _Users_oluwa_dev_vcs_src_client_react_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(42),_Users_oluwa_dev_vcs_src_client_react_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(29),_Users_oluwa_dev_vcs_src_client_react_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(41),_Users_oluwa_dev_vcs_src_client_react_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(35),_Users_oluwa_dev_vcs_src_client_react_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(34),_Users_oluwa_dev_vcs_src_client_react_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(36),react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_6__),_js_vcs_client_utils_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(28),_js_socksync_web_client_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(106),react_inspector__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(104),_blueprintjs_core__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(37),_babel_standalone__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(109),_babel_standalone__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(_babel_standalone__WEBPACK_IMPORTED_MODULE_11__),react_ace__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(254),react_ace__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(react_ace__WEBPACK_IMPORTED_MODULE_12__),ace_builds_src_noconflict_mode_jsx__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(554),ace_builds_src_noconflict_mode_jsx__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(ace_builds_src_noconflict_mode_jsx__WEBPACK_IMPORTED_MODULE_13__),ace_builds_src_noconflict_theme_github__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(555),ace_builds_src_noconflict_theme_github__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(ace_builds_src_noconflict_theme_github__WEBPACK_IMPORTED_MODULE_14__);window.babel=_babel_standalone__WEBPACK_IMPORTED_MODULE_11__,window.React=react__WEBPACK_IMPORTED_MODULE_6___default.a,window.transpile=function(e){return _babel_standalone__WEBPACK_IMPORTED_MODULE_11__.transform(e,{presets:["react"]}).code};var log=_js_vcs_client_utils_js__WEBPACK_IMPORTED_MODULE_7__.get_logger("ss_insp");function make_client(e){return new _js_socksync_web_client_js__WEBPACK_IMPORTED_MODULE_8__.a(e)}var editor=function(){return document.getElementById("textEditor")};window.editor=editor;var aceDefault="(state) => { \n    return ( \n        <h1> Hiya </h1> \n    )\n}";function MyInspector(e){return react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(react_inspector__WEBPACK_IMPORTED_MODULE_9__.a,{data:e})}var ConfigurationUI=function(_React$Component){function ConfigurationUI(){var e,t;Object(_Users_oluwa_dev_vcs_src_client_react_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__.a)(this,ConfigurationUI);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=Object(_Users_oluwa_dev_vcs_src_client_react_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__.a)(this,(e=Object(_Users_oluwa_dev_vcs_src_client_react_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__.a)(ConfigurationUI)).call.apply(e,[this].concat(r)))).state={isOpen:!0,ui_state:{}},t.client=null,t.renderElement=MyInspector,t.editorText=aceDefault,t}return Object(_Users_oluwa_dev_vcs_src_client_react_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__.a)(ConfigurationUI,_React$Component),Object(_Users_oluwa_dev_vcs_src_client_react_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__.a)(ConfigurationUI,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){this.client&&this.client.ws&&this.client.ws.close&&this.client.ws.close()}},{key:"getEditor",value:function(){return react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(react_ace__WEBPACK_IMPORTED_MODULE_12___default.a,{mode:"jsx",theme:"github",name:"textEditor",editorProps:{$blockScrolling:!0},width:"inherit !important",height:"150px",value:this.editorText,onChange:function(e){editor().code=e,this.editorText=e}.bind(this)})}},{key:"makeSS",value:function(){var e=document.getElementById("url").value||"localhost",t=document.getElementById("port").value||9005,n=document.getElementById("sid").value||"main";console.log("Got options: host=".concat(e,",port=").concat(t,",subscribe_id=").concat(n));var r={port:t,host:e,subscribe_id:n,on_update:function(e){this.setState({ui_state:e}),console.log("State updated with:"),console.log(e)}.bind(this)};this.client=make_client(r)}},{key:"renderClick",value:function renderClick(){var text=this.editorText,code=_babel_standalone__WEBPACK_IMPORTED_MODULE_11__.transform(text,{presets:["react"]}).code;console.log("Got code:"),console.log(code);var El=eval(code);console.log("Setting render element "),this.renderElement=El,this.setState((function(e){return e}))}},{key:"render",value:function(){return react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("div",{style:{margin:"30px"}}," ",react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_blueprintjs_core__WEBPACK_IMPORTED_MODULE_10__.g,{onClick:function(){this.setState((function(e){return{isOpen:!e.isOpen}}))}.bind(this)},this.state.isOpen?"Hide Config":"Show Config"),react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_blueprintjs_core__WEBPACK_IMPORTED_MODULE_10__.s,null),react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_blueprintjs_core__WEBPACK_IMPORTED_MODULE_10__.m,{isOpen:this.state.isOpen,keepChildrenMounted:!0},react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("button",{id:"button",style:{marginBottom:"5px"},onClick:this.makeSS.bind(this)},"Connect"),react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_blueprintjs_core__WEBPACK_IMPORTED_MODULE_10__.x,{label:"URL",labelFor:"url"},react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_blueprintjs_core__WEBPACK_IMPORTED_MODULE_10__.M,{id:"url",placeholder:"localhost"})),react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_blueprintjs_core__WEBPACK_IMPORTED_MODULE_10__.x,{label:"Port",labelFor:"port"},react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_blueprintjs_core__WEBPACK_IMPORTED_MODULE_10__.M,{id:"port",placeholder:9005})),react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_blueprintjs_core__WEBPACK_IMPORTED_MODULE_10__.x,{label:"Subscribe ID",labelFor:"sid"},react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_blueprintjs_core__WEBPACK_IMPORTED_MODULE_10__.M,{id:"sid",placeholder:"main"})),react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("button",{id:"button",style:{marginBottom:"5px"},onClick:this.renderClick.bind(this)},"Render JSX"),this.getEditor()),react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("div",{id:"uiHolder",style:{marginTop:"10px",backgroundColor:"white"}},this.renderElement(this.state.ui_state)))}}]),ConfigurationUI}(react__WEBPACK_IMPORTED_MODULE_6___default.a.Component);function InspectionUI(){return react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("h1",null,"You chose ")}function SSInspector(){var e=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)({}),t=Object(_Users_oluwa_dev_vcs_src_client_react_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(e,2),n=(t[0],t[1],Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(!0)),r=Object(_Users_oluwa_dev_vcs_src_client_react_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(n,2),o=r[0],i=r[1];return o?react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(ConfigurationUI,{update:i}):react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(InspectionUI,null)}},263:function(e,t,n){"use strict";var r=n(26),o=n(237),i=n(238),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(t){i(t)}}function c(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},c=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var s=c(n(566)),u=function(){function e(t){o(this,e),this.ops=t,this.log=s.get_logger("hlc_"+t.id),this.lobby={},this.function_table={},this.conn=null;var n=null;this.registration_promise=new Promise((function(e,t){n=e})),this.fullfill_registration=n}return i(e,[{key:"connect",value:function(){return a(this,void 0,void 0,r.mark((function e(){var t,n,o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.log.d("!!!"),t="ws://".concat(this.ops.host,":").concat(this.ops.port),n=null,n=window.WebSocket,this.log.d("Attempting connection to url: "+t),o=new n(t),this.conn=o,o.onopen=function(){this.log.d("Connection successful"),this.register()}.bind(this),o.onmessage=function e(t){var n=t.data;if(n){this.log.d("got message:"),this.log.d(n);var r=JSON.parse(n);switch(this.log.d("Parsed:"),this.log.d(r),r.type){case"call":this.handle_call(r);break;case"registered":this.log.d("Received registered ack"),this.fullfill_registration("REG COMPLETE");break;case"return_value":this.handle_return_value(r);break;default:this.log.d("Unrecognized message type:"),this.log.d(e)}}}.bind(this),o.onclose=function(){this.log.d("The ws connection was closed")}.bind(this),e.abrupt("return",this.registration_promise);case 11:case"end":return e.stop()}}),e,this)})))}},{key:"handle_call",value:function(e){return a(this,void 0,void 0,r.mark((function t(){var n,o,i,a,c,s;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.log.d("Received call request"),n=e.args,o=e.call_identifier,i=e.id,a=this.function_table[i],n||(n={}),n.log||(this.log.d("Setting logger of async handler"),n.log=this.log),c=null,a){t.next=11;break}return c={data:{error:!0,reason:"endpoint_reported_no_exist"},call_identifier:o,type:"return_value"},this.send(c),this.log.d("Could not find so sent error"),t.abrupt("return");case 11:return this.log.d("Running handler"),t.next=14,a.handler(n);case 14:s=t.sent,this.log.d("Got result: "),this.log.d(s),c={data:{error:!1,result:s},call_identifier:o,type:"return_value"},this.log.d("Sending result to hub:"),this.log.d(c),this.send(c);case 21:case"end":return t.stop()}}),t,this)})))}},{key:"handle_return_value",value:function(e){this.log.d("Got return value: "),this.log.d(e);var t=e.call_identifier,n=e.data,r=this.lobby[t];r.promise;(0,r.promise_resolver)(n),this.log.d("Resolved promise with returned data"),this.lobby[t]=void 0}},{key:"send",value:function(e){if(!this.conn)throw"Ws connection has not been initialized";this.conn.send(JSON.stringify(e))}},{key:"register",value:function(){var e={type:"register",id:this.ops.id||"anon"};this.send(e),this.log.d("Sent register message:\n"+JSON.stringify(e))}},{key:"register_function",value:function(e){var t=e.id,n=e.args_info,r=e.handler,o={id:t,args_info:n,type:"register_function"};this.send(o),this.log.d("Sent register function message"),this.log.d(o),this.function_table[t]={args_info:n,handler:r},this.log.d("Added function to local function table"),this.log.d(this.function_table)}},{key:"get_available_functions",value:function(){return a(this,void 0,void 0,r.mark((function e(){var t,n,o,i;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.gen_call_id(),n={type:"list_functions",call_identifier:t},this.send(n),this.log.d("Sent list_functions request"),this.log.d(n),o=null,i=new Promise((function(e,t){o=e})),this.lobby[t]={promise:i,promise_resolver:o},this.log.d("Updated lobby to await async response"),e.abrupt("return",i);case 10:case"end":return e.stop()}}),e,this)})))}},{key:"call",value:function(e){return a(this,void 0,void 0,r.mark((function t(){var n,o,i,a,c,s;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.gen_call_id(),o=e.id,i=e.args,a={id:o,args:i,type:"call",call_identifier:n},c=null,s=new Promise((function(e,t){c=e})),this.lobby[n]={promise:s,promise_resolver:c},this.send(a),t.abrupt("return",s);case 8:case"end":return t.stop()}}),t,this)})))}},{key:"await_registration",value:function(){return this.registration_promise}},{key:"gen_call_id",value:function(){return s.uuid()}}]),e}();t.Client=u},272:function(e,t,n){e.exports=n(569)},277:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t),n.d(t,"first_upper_case",(function(){return O})),n.d(t,"identity",(function(){return D})),n.d(t,"set_difference",(function(){return _e})),n.d(t,"get_logger",(function(){return le})),n.d(t,"set_debug",(function(){return i})),n.d(t,"bug",(function(){return a})),n.d(t,"debug",(function(){return c})),n.d(t,"and",(function(){return s})),n.d(t,"array_and",(function(){return u})),n.d(t,"apply",(function(){return _})),n.d(t,"avg",(function(){return l})),n.d(t,"multiply",(function(){return d})),n.d(t,"rms",(function(){return f})),n.d(t,"variance",(function(){return p})),n.d(t,"std",(function(){return h})),n.d(t,"take",(function(){return g})),n.d(t,"arr_mult",(function(){return m})),n.d(t,"perf",(function(){return v})),n.d(t,"arr_range",(function(){return b})),n.d(t,"range",(function(){return E})),n.d(t,"first",(function(){return w})),n.d(t,"second",(function(){return y})),n.d(t,"last",(function(){return M})),n.d(t,"zip_map",(function(){return P})),n.d(t,"zip",(function(){return k})),n.d(t,"dict_2_vec",(function(){return C})),n.d(t,"number_or_self",(function(){return I})),n.d(t,"d_map",(function(){return x})),n.d(t,"dict_vals_2_num",(function(){return T})),n.d(t,"diff",(function(){return A})),n.d(t,"max",(function(){return U})),n.d(t,"min",(function(){return R})),n.d(t,"merge",(function(){return S})),n.d(t,"cycle_array",(function(){return j})),n.d(t,"loop_fn",(function(){return L})),n.d(t,"get_series",(function(){return W})),n.d(t,"std_percent_diff",(function(){return B})),n.d(t,"array_percent_diff",(function(){return N})),n.d(t,"array_log_diff",(function(){return K})),n.d(t,"cv",(function(){return q})),n.d(t,"cv_matrix",(function(){return z})),n.d(t,"log_diff_half_buff",(function(){return G})),n.d(t,"spd_matrix",(function(){return V})),n.d(t,"matrix_map",(function(){return J})),n.d(t,"matrix_mapper",(function(){return H})),n.d(t,"dom",(function(){return F})),n.d(t,"set_inner_html",(function(){return X})),n.d(t,"flex_row",(function(){return Y})),n.d(t,"make_div_array",(function(){return $})),n.d(t,"id_from_loc",(function(){return Z})),n.d(t,"test_div_array",(function(){return Q})),n.d(t,"app_clear",(function(){return ee})),n.d(t,"app_render",(function(){return te})),n.d(t,"get_colors",(function(){return re})),n.d(t,"now",(function(){return oe})),n.d(t,"click_id",(function(){return ie})),n.d(t,"delay",(function(){return ae})),n.d(t,"loop_until_true",(function(){return se})),n.d(t,"assign_to_window",(function(){return ue}));var r=!0,o=console.log;function i(e){r=e}function a(e){if(r){console.log("<- "+e+" ->");for(var t=0;t<(arguments.length<=1?0:arguments.length-1);t++)console.log(t+1<1||arguments.length<=t+1?void 0:arguments[t+1]);console.log("<- "+e+" ->")}}function c(e){r&&console.log(e)}function s(){for(var e=!0,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var o=0;o<n.length;o++)e=e&&n[o];return!!e}function u(e){for(var t=!0,n=0;n<e.length;n++)t=t&&e[n];return!!t}function _(e,t){return e.apply(null,t)}function l(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t/e.length}function d(e){for(var t=1,n=0;n<e.length;n++)t*=e[n];return t}function f(e){for(var t=0,n=0;n<e.length;n++)t+=e[n]*e[n];return Math.sqrt(t/e.length)}function p(e){for(var t=l(e),n=0,r=0;r<e.length;r++)n+=Math.pow(e[r]-t,2);return n/e.length}function h(e){return Math.sqrt(p(e))}function g(e,t){for(var n=Array(t).fill(0),r=0;r<t;r++)n[r]=e[r];return n}function m(e,t){return e.map((function(e){return e/t}))}function v(e){for(var t=Array(2e4).fill(0),n=0;n<2e4;n++){var r=performance.now(),o=(e(),performance.now());t[n]=o-r}return l(t)}function b(e){return _(Math.max,e)-_(Math.min,e)}function E(e,t){for(var n=t-e,r=Array(n).fill(0),o=0;o<n;o++)r[o]=e+o;return r}function w(e){return e[0]}function y(e){return e[1]}function O(e){return e.charAt(0).toUpperCase()+e.slice(1)}function D(e){return e}function M(e){return e[e.length-1]}function P(e,t){for(var n={},r=0;r<e.length;r++)n[e[r]]=t[r];return n}function k(e,t){return e.map((function(e,n){return[e,t[n]]}))}function C(e){var t=[];for(var n in e)t.push([n,e[n]]);return t}function I(e){var t=Number(e);return isNaN(t)?e:t}function x(e,t){for(var n in e)e[n]=t(e[n]);return e}function T(e){return x(e,I)}function A(e){for(var t=Array(e.length-1).fill(0),n=1;n<e.length;n++)t[n-1]=e[n]-e[n-1];return t}function U(e){for(var t=e[0],n=1;n<e.length;n++)e[n]>t&&(t=e[n]);return t}function R(e){for(var t=e[0],n=1;n<e.length;n++)e[n]<t&&(t=e[n]);return t}function S(e,t){return Object.assign({},e,t)}function j(e,t){return e.push(t),e.shift(),e}function L(e,t,n){for(var r=e.length,o=Array(r).fill(0),i=n;i<r;i++)o[i]=t(e.slice(i-n,i));return o}function W(e,t){return e.map((function(e){return e[t]}))}function B(e){for(var t=Array(e.length-1).fill(NaN),n=0;n<t.length;n++)t[n]=(e[n+1]-e[n])/e[n];return h(t)}function N(e,t){for(var n=Array(t.length).fill(0),r=0;r<n.length;r++)n[r]=(t[r]-e[r])/e[r];return n}function K(e,t){for(var n=Array(t.length).fill(0),r=0;r<n.length;r++)n[r]=Math.log(t[r])-Math.log(e[r]);return n}function q(e){return h(e)/l(e)}function z(e){for(var t=e[0].length,n=Array(t).fill(null),r=0;r<t;r++){var o=e.map((function(e){return e[r]}));n[r]=q(o)}return n}function G(e){var t=Math.ceil(e.length/2),n=g(e,t),r=e.slice(-(e.length-t));return Math.log(l(r))-Math.log(l(n))}function V(e){for(var t=e[0].length,n=Array(t).fill(null),r=0;r<t;r++){var o=e.map((function(e){return e[r]}));n[r]=B(o)}return n}function J(e,t){for(var n=e[0].length,r=Array(n).fill(null),o=0;o<n;o++){var i=e.map((function(e){return e[o]}));r[o]=t(i)}return r}function H(e){return function(t){return J(t,e)}}function F(e){return document.createElement(e)}function X(e,t){t instanceof HTMLElement?e.appendChild(t):e.innerHTML=t}function Y(e,t,n){var r,o;for((r=F("div")).style="display : flex ; flex-wrap : nowrap ; flex-direction : row ; flex-grow : 1 ",o=0;o<e;o++){var i=F("div");i.style="flex-grow : 1";var a=n(o,i);a&&X(i,a),r.appendChild(i)}return r}function $(e,t,n,r){var o,i;for((o=F("div")).id=n,o.style="width: 100% ; height : 100% ; display : flex ; flex-wrap : nowrap ; flex-direction : column ",i=0;i<e;i++){var a=Y(t,0,(function(e,t){return r(i,e,t)}));o.appendChild(a)}return o}function Z(e,t,n){return n*e+t}function Q(e,t){return $(e,t,"foo",(function(e,n,r){return Z(e,n,t).toString()}))}function ee(){for(var e=document.getElementById("app");e.firstChild;)e.removeChild(e.firstChild)}function te(e){ee(),document.getElementById("app").appendChild(e)}var ne=["black","blue","red","green","yellow","orange"];function re(e){return g(ne,e)}function oe(){return(new Date).getTime()}function ie(e){var t=document.getElementById(e);console.assert(t),t.click()}function ae(e){return new Promise((function(t,n){setTimeout((function(){t(!0)}),e)}))}function ce(){return(new Date).getTime()}function se(e,t,n){var r=ce();return new Promise((function(o,i){var a=setInterval((function(){var t=ce();e()?(setTimeout((function(){clearInterval(a)}),1),o(!1)):t-r>=n&&(setTimeout((function(){clearInterval(a)}),1),o(!0))}),t)}))}function ue(e,t){window[e]?(window[e]=t,o("(Re)Defining: "+e)):window[e]=t}function _e(e,t){var n=new Set,r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){var s=a.value;t.has(s)||n.add(s)}}catch(u){o=!0,i=u}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}function le(e){var t="["+e+"]:: ",n=function(e,n){"string"==typeof n?console[e](t+n):(console[e](t+"~>"),console[e](n))};return{i:function(e){n("info",e)},d:function(e){n("debug",e)}}}},281:function(e,t,n){var r={"./default.jsx":282,"./dispatch_builder.jsx":283,"./javascript_echo.jsx":284};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=281},282:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(25);t.default=function(e){var t=Object(i.b)((function(e){return e}));return o.a.createElement("div",null,o.a.createElement("h1",null,"DEFAULT"),o.a.createElement("p",null,JSON.stringify(t.subscriptions[e.subscribe_id]),"}"))}},283:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r);t.default=function(){return o.a.createElement("div",null,o.a.createElement("h1",null,"THIS IS THE UI FOR THE DISPATCH BUILDER"))}},284:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(25);t.default=function(e){var t=Object(i.b)((function(t){return t.subscriptions[e.subscribe_id]})).items;return o.a.createElement("div",null,o.a.createElement("h1",null,"Javascript Echo"),o.a.createElement("p",null," ",t[t.length-1].time),o.a.createElement("p",null," You said => ",t[t.length-1].text))}},54:function(e,t,n){var r=n(281),o={};r.keys().map((function(e){var t=e.replace("./","").replace(".jsx","");o[t]=r(e).default})),e.exports=o},565:function(e,t,n){},566:function(module,exports,__webpack_require__){"use strict";var __importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(exports,"__esModule",{value:!0});var logger=__importStar(__webpack_require__(239)),logger_1=__webpack_require__(239);exports.Logger=logger_1.Logger;var uuid_1=__webpack_require__(570);function get_logger(e){return logger.make_logger(e)}function string_contains_any(e,t){var n=!1,r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){var s=a.value,u=e.indexOf(s)>-1;n=n||u}}catch(_){o=!0,i=_}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return!!n}exports.get_logger=get_logger;var arithmetic_ops=["+","-","/","*"];function has_arithmetic(e){return string_contains_any(e,arithmetic_ops)}function _eval(text){return eval(text)}function last(e){return e[e.length-1]}function update_in(e,t,n){for(var r=e,o=0;o<t.length-1;o++)r[t[o]]||(r[t[o]]={}),r=r[t[o]];var i=last(t),a=n(r[i]);r[i]=a}function get_in(e,t){for(var n=e,r=0;r<t.length;r++){if(!n[t[r]])return null;n=n[t[r]]}return n}function array_update_to_object_update(e){for(var t=e.path,n=e.value,r={},o=0;o<t.length-1;o++)r[t[o]]={},r=r[t[o]];return r[last(t)]=n,r}function object_update_to_array_update(e){for(var t=[],n=e;n.constructor==Object;){var r=Object.keys(n);if(1!=r.length)break;t.push(r[0]),n=n[r[0]]}return{path:t,value:n}}function ms(){return(new Date).getTime()}function sets_equal(e,t){if(e.size!==t.size)return!1;var n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var c=i.value;if(!t.has(c))return!1}}catch(s){r=!0,o=s}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return!0}function set(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Set(t)}function partition(e,t){for(var n=[],r=[],o=0;o<e.length;o++)(o+1)%t==0&&0!=o?(r.push(e[o]),n.push(r),r=[]):(r.push(e[o]),o==e.length-1&&n.push(r));return n}function uuid(){return uuid_1.v4()}exports.has_arithmetic=has_arithmetic,exports._eval=_eval,exports.last=last,exports.update_in=update_in,exports.get_in=get_in,exports.array_update_to_object_update=array_update_to_object_update,exports.object_update_to_array_update=object_update_to_array_update,exports.ms=ms,exports.sets_equal=sets_equal,exports.set=set,exports.partition=partition,exports.uuid=uuid;var path=__webpack_require__(236),fs=__webpack_require__(235);function rec_find_dir_ext(e,t){return exports.walkSync(e).filter((function(e){return e.substr(-1*(t.length+1))=="."+t}))}function str_empty(e){return""==e}function str_not_empty(e){return!str_empty(e)}function trim(e){return e.trim()}function char_replacer(e,t){return function(n){return n.replace(new RegExp(e,"g"),t)}}function char_remover(e){return char_replacer(e,"")}exports.walkSync=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return fs.readdirSync(e).forEach((function(n){var r=path.join(e,n);".#"!=path.basename(r).substring(0,2)&&(t=fs.statSync(r).isDirectory()?exports.walkSync(path.join(e,n),t):t.concat(path.join(e,n)))})),t},exports.rec_find_dir_ext=rec_find_dir_ext,exports.str_empty=str_empty,exports.str_not_empty=str_not_empty,exports.trim=trim,exports.char_replacer=char_replacer,exports.char_remover=char_remover},568:function(e,t,n){},569:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"default",(function(){return oe}));var o={};n.r(o),n.d(o,"subscriptions",(function(){return se})),n.d(o,"subscribe",(function(){return ue})),n.d(o,"publish",(function(){return _e})),n.d(o,"functions",(function(){return le})),n.d(o,"provide",(function(){return de})),n.d(o,"call",(function(){return fe}));var i={};n.r(i),n.d(i,"audio_primitives",(function(){return Ie})),n.d(i,"connect",(function(){return xe})),n.d(i,"disconnect",(function(){return Te}));var a={};n.r(a),n.d(a,"tts",(function(){return Ue})),n.d(a,"speech_que",(function(){return Re})),n.d(a,"is_speaking",(function(){return Se})),n.d(a,"finished_speaking",(function(){return je})),n.d(a,"speak",(function(){return We}));var c={};n.r(c),n.d(c,"tc",(function(){return qe})),n.d(c,"connect_ws",(function(){return ze})),n.d(c,"close_ws",(function(){return Ge})),n.d(c,"send_text",(function(){return Ve})),n.d(c,"vcs_params",(function(){return Je})),n.d(c,"start_recognition",(function(){return $e})),n.d(c,"stop_recognition",(function(){return Ze})),n.d(c,"trigger_text",(function(){return Qe})),n.d(c,"start_audio_trigger",(function(){return et})),n.d(c,"stop_audio_trigger",(function(){return tt}));var s=n(0),u=n.n(s),_=n(19),l=n.n(_),d=(n(277),n(29)),f=n(41),p=n(35),h=n(34),g=n(36),m=n(25);var v=n(54),b=n.n(v),E=function(e){window.vcs_ui.log(e)};function w(e){return Object(m.b)((function(e){return e})).subscriptions[e.subscribe_id]?u.a.createElement(e.Renderer,{subscribe_id:e.subscribe_id}):u.a.createElement("h1",null,"Awaiting State")}var y=function(){var e=Object(m.b)((function(e){return e.active_ids})).map((function(e){var t=e.split("_").slice(0,-1).join("_"),n=null;return b.a[t]?(E("Found matching command interface for: "+t),n=b.a[t]):(E("!! Could not find matching interface for cmd: "+t),n=b.a.default),u.a.createElement(w,{Renderer:n,subscribe_id:e,key:e})}));return u.a.createElement("div",{className:"commandsContainer"},e)},O=n(82),D=n(64),M=n(266),P=function(e){window.vcs_ui.log(e)},k=(s.Component,n(102)),C=(n(61),n(75),n(225),n(37)),I=n(2),x=n(17),T=n(46),A=n(104);var U=n(150),R=n.n(U),S=n(105),j=n(28),L=j.get_logger("term");var W=n(268);var B=n(253),N=n(255);var K=n(42),q=n(264);var z=n(26),G=n.n(z),V=n(44),J=n(265);function H(e){return F.apply(this,arguments)}function F(){return(F=Object(V.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.vcs.hyperloop){e.next=3;break}return e.next=3,window.vcs.hyperloop_connect();case 3:return e.next=5,window.vcs.hyperloop_call({id:"sattsys.hyperloop.traceroute",args:{url:t}});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e){for(var t=[],n=0;n<e.length-1;n++){var r=e[n],o=e[n+1];t.push({startLat:r.latitude,startLng:r.longitude,endLat:o.latitude,endLng:o.longitude,color:["white",["red","black","blue","green","orange","yellow"][Math.round(3*Math.random())]]})}return t}var Y={command_stack:{element:u.a.createElement(y,null),title:"Command Stack"},inspector:{element:u.a.createElement((function(e){var t=Object(m.b)((function(e){return e.inspection_ports})),n=Object.keys(t);return u.a.createElement("ul",null,n.map((function(e){return u.a.createElement("li",{key:performance.now()},u.a.createElement("div",null,u.a.createElement("span",null,e),u.a.createElement(A.a,{data:t[e]})))})))}),null),title:"Inspector"},log:{element:u.a.createElement("h1",null," Pending implementation"),title:"Log Widget"},display:{element:u.a.createElement("h1",null," Pending implementation"),title:"Display Widget"},terminal:{element:u.a.createElement((function(){var e={text:function(e){return e.payload},feedback:function(e){return"@::"+e.payload},unrecognized_input:function(){return"what?"},params:function(e){L.i("Received params"),e,L.i("Params updated")},command_result:function(e){var t=e.payload;e.id;return L.d("Got command result:"),L.d(t),t.quiet?(L.i("Command suppressed output"),null):"[CMD Result]:: "+t.result}},t=function(e){},n=new S.VCS_TEXT_CLIENT({port:9001,host:"localhost",id:"term",on_msg:function(n){L.d("Got ws msg:"),L.d(n);var r=e[n.type];if(r){var o=r(n);t(o)}else t("Received unrecognized message type "+n.type+" from vcs server")}});return n.connect(),u.a.createElement(R.a,{startState:"maximised",descriptions:{show:!1},color:"green",backgroundColor:"black",barColor:"black",style:{fontWeight:"bold",fontSize:"1em",width:"100%"},commandPassThrough:function(e,r){!function(e){if(!n)throw Error("Not connected");n.send({text:e,type:"vcs_text"})}(e.join(" ")),t=r}})}),null),title:"Console Interface"},globe:{element:u.a.createElement((function(){return u.a.createElement(W.a,null)}),null),title:"Earth"},ss_inspector:{element:u.a.createElement(B.a,null),title:"Socksync Inspector"},iframe:{element:u.a.createElement((function(){return u.a.createElement(N.a,{url:"http://google.com",width:"100%",height:"100%",display:"initial",position:"relative"})}),null),title:"Iframe"},map_gl:{element:u.a.createElement((function(){var e=Object(s.useState)({width:"100%",height:"100%",latitude:37.7577,longitude:-122.4376,zoom:8}),t=Object(K.a)(e,2),n=t[0],r=t[1];return window.vcs_setViewport=r,window.vcs_viewPort=n,window.vcs_set_viewport=function(e){var t=Object.assign(n,e);console.log("Setting: "),console.log(t),r(t)},u.a.createElement(q.a,Object.assign({},n,{onViewportChange:r,mapboxApiAccessToken:"pk.eyJ1Ijoic2F0dHN5cyIsImEiOiJjazd5YzBicjMwNWNkM2ZvN3BxaWViNDF6In0.oB6zUrblPfbayrW9DKphhA"}))}),null),title:"MapGl"},"globe.gl":{element:u.a.createElement((function(){var e=Object(s.useState)([]),t=Object(K.a)(e,2),n=t[0],r=t[1],o=function(){var e=Object(V.a)(G.a.mark((function e(t){var n,o,i,a,c,s,u;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({thinking:!0}),n=document.getElementById("globe.traceroute.search").value,console.log("Doing traceroute request with the url: "+n),t({displaying:n}),e.next=6,H(n);case 6:return o=e.sent.result,console.log("Got data..."),console.log(o),i=o.map((function(e){return e.ip})).slice(1),console.log("Got ips.."),console.log(i),a=i.map((function(e){return window.vcs.hyperloop_call({id:"sattsys.hyperloop.geolocate_ip",args:{ip:e}})})),e.next=15,Promise.all(a);case 15:c=e.sent,console.log("Got ip locs: "),console.log(c),s=c.map((function(e){return{latitude:Number(e.result.latitude),longitude:Number(e.result.longitude)}})),console.log("Got geo data:"),console.log(s),u=X(s),console.log("Got arc data:"),console.log(u),console.log("Setting globe data"),r(u),t({thinking:!1});case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return u.a.createElement("div",{style:{position:"relative",zIndex:0}},u.a.createElement((function(){var e=Object(s.useState)({thinking:!1,displaying:"none"}),t=Object(K.a)(e,2),n=t[0],r=t[1],i={flexGrow:void 0};return u.a.createElement("div",{style:{position:"absolute",top:"20px",left:"20px",zIndex:1e3}},u.a.createElement(C.q,{style:i},u.a.createElement(C.M,{id:"globe.traceroute.search",placeholder:"Enter url..."}),u.a.createElement(C.g,{icon:"arrow-right",onClick:function(){o(r)}})),u.a.createElement("p",{style:{color:"white"}}," Currently displaying : ",n.displaying),u.a.createElement("div",null,n.thinking?u.a.createElement(C.pb,null):null))}),null),u.a.createElement(J.a,{globeImageUrl:"//unpkg.com/three-globe/example/img/earth-night.jpg",arcsData:n,arcColor:"color",arcStroke:"2px",arcDashLength:function(){return.3},arcDashGap:function(){return.05},arcDashAnimateTime:function(){return 8e3}}))}),null),title:"GlobeGl"}},$=0;function Z(){return"id_"+$++}var Q=function(e){var t=Object.keys(e),n=[];return t.map((function(t){var r=e[t],o={id:Z(),hasCaret:!0,isExpanded:!0,icon:"folder-close",label:u.a.createElement(C.zb,{content:r.tooltip,position:x.a.RIGHT},r.text),childNodes:r.children.map((function(e){return{id:Z(),icon:"cube-add",label:Y[e.id].title,widget_id:e.id}}))};n.push(o)})),n}({commands:{tooltip:"Interfaces for Command Inspection",text:"Command Visualization",children:[{id:"command_stack"}]},user_interaction:{tooltip:"Various tools for user interaction",text:"User Interaction",children:[{id:"terminal"},{id:"iframe"}]},debugging:{tooltip:"Tools for debugging",text:"Debugger UI Tools",children:[{id:"inspector"},{id:"log"},{id:"ss_inspector"}]},exploratory:{tooltip:"Exploratory Widgets",text:"Exploratory",children:[{id:"globe"},{id:"map_gl"},{id:"globe.gl"}]}}),ee=(u.a.createElement(C.zb,{content:"I'm a folder <3",position:x.a.RIGHT},"Folder 1"),u.a.createElement(C.zb,{content:"An eye!"},u.a.createElement(C.L,{icon:"eye-open"})),u.a.createElement(C.L,{icon:"tag",intent:T.a.PRIMARY,className:I.g.TREE_NODE_ICON}),u.a.createElement(C.zb,{content:"foo",position:x.a.RIGHT},"Folder 2"),function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={nodes:Q},n.handleNodeClick=function(e,t,r){var o=e.isSelected;r.shiftKey||n.forEachNode(n.state.nodes,(function(e){return e.isSelected=!1})),e.isSelected=null==o||!o,n.setState(n.state);var i=n.props.windowId;console.log("GOT CLICK from window id: "+i);var a=e.widget_id,c=(e.label,Y[a].element),s=Y[a].title;console.log(e),window.vcs.store.dispatch({type:"ADD_WIDGET",payload:{id:i,title:s,element:c}})},n.handleNodeCollapse=function(e){e.isExpanded=!1,n.setState(n.state)},n.handleNodeExpand=function(e){e.isExpanded=!0,n.setState(n.state)},n}return Object(g.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return u.a.createElement(C.Ab,{contents:this.state.nodes,onNodeClick:this.handleNodeClick,onNodeCollapse:this.handleNodeCollapse,onNodeExpand:this.handleNodeExpand,className:I.g.ELEVATION_2})}},{key:"forEachNode",value:function(e,t){if(null!=e){var n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var c=i.value;t(c),this.forEachNode(c.childNodes,t)}}catch(s){r=!0,o=s}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}}}}]),t}(u.a.Component));function te(){var e="mosaic_node_"+(new Date).getTime();return console.log(e),e}function ne(e){var t=Object(m.b)((function(t){return t.ELEMENT_MAP[e.id]})),n=Object(m.b)((function(t){return t.TITLE_MAP[e.id]}));return t||(Y[e.id]?(t=Y[e.id].element,n=Y[e.id].title):(t=u.a.createElement(ee,{windowId:e.id}),n="Select UI")),u.a.createElement(k.MosaicWindow,{path:e.path,createNode:te,title:n},t)}var re="globe.gl";var oe=function(){return u.a.createElement("div",{id:"mosaic"},u.a.createElement(k.Mosaic,{renderTile:function(e,t){return u.a.createElement(ne,{id:e,path:t})},initialValue:re}))},ie=C.yb.create({className:"recipe-toaster",position:x.a.TOP}),ae=n(78),ce=console.log,se={};function ue(e){var t=e.id,n=e.cb;se[t]?se[t].push(n):se[t]=[n]}function _e(e){var t=e.id,n=e.data,r=se[t];r&&r.forEach((function(e){return e({data:n})}))}var le={};function de(e){var t=e.id,n=e.func;le[t]?(ce("Warning: overwriting function"),le[t]=n):le[t]=n}function fe(e){var t=e.id,n=e.args,r=le[t];return r?(ce("calling: ",t),r(n)):(ce("No registered function"),null)}function pe(){var e=Object(s.useState)(0),t=Object(K.a)(e,2),n=t[0],r=t[1];return ue({id:"audio.rms",cb:function(e){var t=e.data;r(10*t)}}),u.a.createElement(C.jb,{className:"bp3-intent-primary",value:n}," ")}var he=["power","headset","vertical-bar-chart-asc"];function ge(){var e=!1;return s.createElement(C.T,{className:I.g.DARK},s.createElement(C.V,{align:ae.a.LEFT},s.createElement(C.W,null,"VCS"),s.createElement(C.U,null),s.createElement(C.g,{className:I.g.MINIMAL,onClick:function(){!function(){var t=null,n=null;e?(t="speech.stop",n="Stopped Listening"):(t="speech.init",n="Started Listening"),fe({id:t,args:null}),fe({id:"ui.toast",args:{message:n}}),e=!e}()},icon:he[1],text:" "})),s.createElement(C.V,{align:ae.a.CENTER},s.createElement(pe,null)))}n(565);window.vcs?Object.assign(window.vcs,{mosaic:r}):window.vcs={mosaic:r};var me=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).showToast=function(e){var t=e.message;ie.show({message:t})},n}return Object(g.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return de({id:"ui.toast",func:function(e){this.showToast(e)}.bind(this)}),u.a.createElement("div",{className:"App"},u.a.createElement(ge,null),u.a.createElement(oe,null))}}]),t}(u.a.PureComponent);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ve=n(261),be=n(77),Ee=n(262),we={message:"Development Version 2020",num:20,active_ids:[],subscriptions:{},subscription_data:{},inspection_ports:{x1:{a:[1,2,3,4,4],b:{d:20}},x2:{x:[1,2,3,4,{hello:30}],b:{d:20}}},ELEMENT_MAP:{},TITLE_MAP:{}},ye=function(e){return console.log("[store]:: "+e)},Oe=Object(Ee.a)((function(e,t){switch(t.type){case"SET_MSG":return e.message=t.payload,e;case"ADD_ACTIVE_ID":return e.active_ids.push(t.payload.id),ye("Added active id: "+t.payload.id),e;case"ADD_SYNC_INFO":return e.subscription_data[t.payload.id]={client:t.payload.client},ye("Added sync info for id: "+t.payload.id),e;case"UPDATE_SUBSCRIPTION":return ye("Updating subscription for: "+t.payload.id),console.log(t),e.subscriptions[t.payload.id]=t.payload.data,e.message="Updated subscription for: "+t.payload.id+" @"+(new Date).toString(),e;case"REMOVE_ACTIVE_ID":return e.active_ids=e.active_ids.filter((function(e){return e!=t.payload.id})),ye("Removed active id: "+t.payload),e;case"REMOVE_SUBSCRIPTION":return e.subscription_data[t.payload.id].client.ws.close(),ye("Closed websocket connection for id: "+t.payload.id),delete e.subscription_data[t.payload.id],delete e.subscriptions[t.payload.id],e;case"ADD_WIDGET":ye("Received request to ADD WIDGET"),ye(t);var n=t.payload,r=n.id,o=n.element,i=n.title;return e.ELEMENT_MAP[r]=o,e.TITLE_MAP[r]=i,e;default:return ye("Hit default case in root reducer with action -> "),ye(t),e}})),De=Object(be.createStore)(Oe,we,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),Me=n(106),Pe=function(e){window.vcs_ui.log(e)};window.vcs_ui||(window.vcs_ui={});var ke=function(e){console.log("[vcs_ui] \t\t ~ "+e)};ke("Initializing"),window.vcs_ui.log=ke;var Ce=new WebSocket("ws://localhost:9003");Ce.onopen=function(){ke("Connected to vcs UI port")},Ce.onmessage=function(e){var t=JSON.parse(e.data);switch(t.type){case"command_initialization":var n=t.id;ke("Received command initialization for: "+n),window.Dispatch({type:"ADD_ACTIVE_ID",payload:{id:n}});var r=function(e){Pe("Initializing sync for: "+e);var t=e,n=new Me.a({port:9004,subscribe_id:t,on_update:function(t){Pe("Got update for id: "+e),window.Dispatch({type:"UPDATE_SUBSCRIPTION",payload:{id:e,data:t}})}});return Pe("Link setup has been initiated..."),{client:n}}(n).client;window.Dispatch({type:"ADD_SYNC_INFO",payload:{client:r,id:n}});break;case"command_finish":n=t.id;ke("Received command finish for: "+n),window.Dispatch({type:"REMOVE_ACTIVE_ID",payload:{id:n}}),window.Dispatch({type:"REMOVE_SUBSCRIPTION",payload:{id:n}});break;default:ke("Unrecognized message type:"+t.type)}};var Ie={context:null,source:null,processor:null,stream:null};function xe(e){navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(e){return function(t){Ie.stream=t,Ie.context=new AudioContext,Ie.source=Ie.context.createMediaStreamSource(t),Ie.processor=Ie.context.createScriptProcessor(1024,1,1),Ie.source.connect(Ie.processor),Ie.processor.connect(Ie.context.destination),Ie.processor.onaudioprocess=function(t){e(t.inputBuffer.getChannelData(0))}}}(e))}function Te(){var e=Ie.context;e&&e.close(),Ie={context:null,source:null,processor:null,stream:null}}var Ae=j.get_logger("tts"),Ue=window.speechSynthesis,Re=[];function Se(){return Ue.speaking}function je(){return Le.apply(this,arguments)}function Le(){return(Le=Object(V.a)(G.a.mark((function e(){var t;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.loop_until_true((function(){return!Ue.speaking}),200,6e4);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function We(e){return Be.apply(this,arguments)}function Be(){return(Be=Object(V.a)(G.a.mark((function e(t){var n,r;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ae.i("Request to speak  =:> "+t),Ue.speaking){e.next=14;break}return Ze(),(n=new SpeechSynthesisUtterance(t)).voice=Ue.getVoices()[49],n.rate=1.2,Ue.speak(n),e.next=9,je();case 9:e.sent,(r=Re.shift())?We(r):$e(),e.next=16;break;case 14:Ae.i("Scheduling speech for later."),Re.push(t);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ne=window.sounds.core.sounds,Ke=Object(j.get_logger)("speech"),qe=null;function ze(){Ke.i("Connecting ws.."),(qe=new S.VCS_TEXT_CLIENT({port:9001,host:"localhost",on_msg:Fe,id:"spch"})).connect()}function Ge(){Ke.i("Closing ws"),qe&&qe.close()}var Ve=function(e){if(!qe)throw Error("Not connected");qe.send({text:e,type:"vcs_text"})},Je={};var He={text:function(e){var t=e.payload;Ke.i("handling text: "+t),We(t)},feedback:function(e){switch(e.payload){case"success":Ne.success();break;case"continue":Ne.continue();break;case"unrecognized":Ne.unrecognized();break;case"error":Ne.error();break;case"ready-for-input":Ne["ready-for-input"]();break;case"shutdown":window.location="https://github.com/sheunaluko/vcs";break;default:Ke.i("Unrecognized feedback text")}},unrecognized_input:function(){return Ne.unrecognized()},params:function(e){Ke.i("Received params"),Je=e,Ke.i("Params updated")},command_result:function(e){var t=e.payload;e.id;Ke.d("Got command result:"),Ke.d(t),t.quiet?Ke.i("Command suppressed output"):Ne.success()}};function Fe(e){Ke.d("Got ws msg:"),Ke.d(e);var t=He[e.type];t?t(e):We("Received unrecognized message type "+e.type+" from vcs server")}var Xe=new window.webkitSpeechRecognition;Xe.continuous=!0,Xe.interimResults=!1,Xe.onstart=function(){Ke.i("Recognition starting")},Xe.onsoundstart=function(){},Xe.onresult=function(e){Ke.d(e);var t=e.results[e.resultIndex][0].transcript;Ke.d("Got recognition result: "+t),Ve(t)},Xe.onerror=function(e){Ke.d("Recognition error:"),Ke.d(e)},Xe.onend=function(){Ke.i("Recognition ended"),Ye=!1};var Ye=!1;function $e(){Ye||(Ke.d("Starting recognition."),Xe.start(),Ye=!0)}function Ze(){Xe.abort(),Ye=!1}function Qe(e){Ve(e)}function et(){!function(e){var t=.001;xe((function(n){var r=j.rms(n);0!=t&&r/t>5&&!Se()&&e(),t=r,_e({id:"audio.rms",data:r})}))}($e)}function tt(){Te(),_e({id:"audio.rms",data:0})}var nt=n(263);function rt(){return(rt=Object(V.a)(G.a.mark((function e(){var t,n,r,o,i=arguments;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:9011,n=i.length>1&&void 0!==i[1]?i[1]:"localhost",r=i.length>2&&void 0!==i[2]?i[2]:"sattsys.vcs_client",o=new nt.Client({port:t,host:n,id:r}),window.vcs.hyperloop=o,e.next=7,o.connect();case 7:window.vcs.hyperloop_call=function(){var e=Object(V.a)(G.a.mark((function e(t){var n,r,o=arguments;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]&&o[1],e.next=3,window.vcs.hyperloop.call(t);case 3:return r=e.sent,n&&console.log(r),window.vcs.hyperloop.last_result=r,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ot(){$e(),et()}ze(),de({id:"speech.init",func:function(e){ot()}}),de({id:"speech.stop",func:function(e){Ze(),tt()}});var it={speech:c,tts:a,init_speech:ot,send_text:function(e){Qe(e)},mic:i,util:j,hyperloop_connect:function(){return rt.apply(this,arguments)}};window.vcs?Object.assign(window.vcs,it):window.vcs=it;var at={hub:o,store:De,command_manifest:b.a};window.vcs?Object.assign(window.vcs,at):window.vcs=at,window.globals={subscriptions:{}},window.Dispatch=De.dispatch,window.dispatch={set_msg:function(e){De.dispatch({type:"SET_MSG",payload:e})}};n(567),n(568);ve.config(),l.a.render(u.a.createElement(m.a,{store:De},u.a.createElement(me,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[272,1,2]]]);
//# sourceMappingURL=main.a4944719.chunk.js.map